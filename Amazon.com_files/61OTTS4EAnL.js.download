(function(u){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,L=h?h("SocialShareWidgetAUI","AmazonUI"):g;L.guardFatal?L.guardFatal(u)(L,window):L.execute(function(){u(L,window)})})(function(u,g,h){function L(e){if(Array.isArray(e)){for(var h=0,g=Array(e.length);h<e.length;h++)g[h]=e[h];return g}return Array.from(e)}"use strict";"use strict";u.register("SocialShareWidget",function(){var e;(function(){var h={353:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});
var c=l(905),d=l(738);e=function(){function a(){var y=this;this.generateTimestampCollection=function(){var b=(new Date).getTimezoneOffset();b=y.getDateTimeByOffset(b);var a=y.getDateTimeByOffset(0);return{hitDay:b.split("T")[0],hitDatetime:b,hitDatetimeUtc:a}};this.getMarketplaceId=function(b){return"string"==typeof b?b:g.ue&&g.ue.mid?g.ue.mid:d.CSA_DEFAULT_VALUE.string};var b=this.generateTimestampCollection();this.csaMetricsData={schemaId:a.CSA_SCHEMA_ID,userAgentId:d.CSA_DEFAULT_VALUE.number,hitDay:b.hitDay,
hitDatetime:b.hitDatetime,hitDatetimeUtc:b.hitDatetimeUtc,pageType:g.ue_pty?g.ue_pty:d.CSA_DEFAULT_VALUE.string,subPageType:g.ue_spty?g.ue_spty:d.CSA_DEFAULT_VALUE.string,sessionId:g.ue&&g.ue.sid?g.ue.sid:d.CSA_DEFAULT_VALUE.string}}return a.prototype.withCSAClickEventData=function(a){var b=a.shareDataAttributes;if(this.csaMetricsData.customerId=b.customerId?b.customerId:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.httpRequestId=b.requestId?b.requestId:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.asin=
b.asin?b.asin:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.ingress=b.ingress?b.ingress:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.platform=b.platform?b.platform:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.isInternal=this.getCSANumberMapping(b.isInternal),this.csaMetricsData.isRobot=this.getCSANumberMapping(b.isRobot),this.csaMetricsData.channel=a.channel?a.channel:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.refMarker=a.refMarker?a.refMarker:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.referrerUrl=
a.refererURL?a.refererURL:d.CSA_DEFAULT_VALUE.string,this.csaMetricsData.marketplaceId=this.getMarketplaceId(b.marketplaceId),this.csaMetricsData.isExperiment=/T\d+/.test(a.treatment)?"Y":"N",this.csaMetricsData.triggeredFromScreenshotToast=!!b.triggeredFromScreenshotToast&&b.triggeredFromScreenshotToast,a.weblab)b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b)[a.weblab]=a.treatment,this.csaMetricsData.shareEntities=b;a.customizeShareCSAData&&(b=this.csaMetricsData.shareEntities,b=void 0===
b?{}:b,a.customizeShareCSAData.isCustomizedExperienceEnabled===d.TRUE&&(b.backgroundImagePhysicalId=a.customizeShareCSAData.backgroundImagePhysicalId,b.deviceCoverImagePhysicalId=a.customizeShareCSAData.deviceCoverImagePhysicalId,b.hasQuote=a.customizeShareCSAData.hasQuote,b.isCustomized=a.customizeShareCSAData.isCustomized,b.customizePreSelected=a.customizeShareCSAData.customizePreSelected,b.isQuotesAvailable=a.customizeShareCSAData.isQuotesAvailable,this.csaMetricsData.shareEntities=b));a.isCustomShareOptionsSheetEnabled&&
(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).isCustomShareOptionsSheetEnabled="1",this.csaMetricsData.shareEntities=b);a.caf&&(b=this.csaMetricsData.shareEntities,(b=void 0===b?{}:b).cafSwitchEnabled=a.cafSwitchEnabled?d.TRUE:d.FALSE,this.csaMetricsData.shareEntities=b);return this},a.prototype.withShareHitType=function(a){return this.csaMetricsData.shareHitType=a||d.CSA_DEFAULT_VALUE.string,this},a.prototype.getCSANumberMapping=function(a){return isNaN(Number(a))?2:Number(a)},a.prototype.getDateTimeByOffset=
function(c){var b=new Date;0!==c&&(c*=a.MINUTES_TO_MILISECONDS,b=b.getTime()-c,b=new Date(b));return b.toISOString().split("Z")[0].split(".")[0]},a.prototype.logEvent=function(){(0,c.isCSALoaded)()&&g.csa(a.CSAPluginId,{producerId:a.CSA_PRODUCER_ID})(a.CSA_LOG_EVENT,this.csaMetricsData)},a.MINUTES_TO_MILISECONDS=6E4,a.CSAPluginId="Events",a.CUSTOMIZE_SHARE_ENTITY_NAME="CustomizeShare",a.CSA_PRODUCER_ID="social-share",a.CSA_LOG_EVENT="log",a.CSA_SCHEMA_ID="SocialShareCSACustomEvent.CSAShareMetrics.8",
a}();a.default=e},305:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,c){var d={email:{label:"Email",name:"email",ref:"em",shareBaseUrl:"mailto:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(c){var b="?subject\x3d".concat(encodeURIComponent(a.emailSubject||a.title)),d="\x26body\x3d".concat(encodeURIComponent(a.title));
c=encodeURIComponent(c||a.shareUrl.getReturnForChannel(this.ref));return"".concat(this.shareBaseUrl).concat(b).concat(d," ").concat(c)}},pi:{label:"Pinterest",name:"pinterest",ref:"pi",shareBaseUrl:"https://www.pinterest.com/pin/create/button/",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(c){c="?url\x3d".concat(encodeURIComponent(c||
a.shareUrl.getReturnForChannel(this.ref)));var b="\x26description\x3d".concat(encodeURIComponent(a.title)),d="\x26media\x3d".concat(encodeURIComponent(a.image));return"".concat(this.shareBaseUrl).concat(c).concat(b).concat(d,"\x26method\x3dbutton")}},li:{label:"Line",name:"line",ref:"li",shareBaseUrl:"https://social-plugins.line.me/lineit/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"line-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(c){var b="?text\x3d".concat(encodeURIComponent(a.text)," ").concat(encodeURIComponent(a.title));c="\x26url\x3d".concat(encodeURIComponent(c||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b).concat(c)}},fb:{label:"Facebook",name:"facebook",ref:"fa",shareBaseUrl:"https://www.facebook.com/dialog/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"facebook-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(c){c=encodeURIComponent(c||a.shareUrl.getReturnForChannel(this.ref));var b=encodeURIComponent(a.shareUrl.getReturnForChannel(this.ref).replace("_r_","_s_")),d=encodeURIComponent("#"+(a.hashtags[0]||"Amazon"));c=["?_encoding\x3dUTF8\x26app_id\x3d465632727431967\x26display\x3dpopup","href\x3d".concat(c),"redirect_uri\x3d".concat(b),"hashtag\x3d".concat(d)].join("\x26");return"".concat(this.shareBaseUrl).concat(c)}},tw:{label:"X",name:"x",
ref:"tw",shareBaseUrl:"https://twitter.com/intent/tweet",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(c){var b="?text\x3d".concat(encodeURIComponent(a.title));c="\x26url\x3d".concat(encodeURIComponent(c||a.shareUrl.getReturnForChannel(this.ref)));var d="\x26hashtags\x3d".concat(a.hashtags.join(",")),f="\x26via\x3d".concat(encodeURIComponent("Amazon"));
return"".concat(this.shareBaseUrl).concat(b).concat(c).concat(d).concat(f)}},wa:{label:"WhatsApp",name:"whatsapp",ref:"wa",shareBaseUrl:"https://api.whatsapp.com/send?text\x3d",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(c){c="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(a.text),
"\n              ").concat(encodeURIComponent(c||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(c)}},sms:{label:"SMS",name:"sms",ref:"sms",shareBaseUrl:"sms:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(c){c="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(c||
a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(c)}},embed:{label:"Embed",name:"embed",ref:"eb",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}},copy:{label:"Copy",name:"copy",ref:"cp",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"link-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}}};if(null==c?0:c.length){var f={};return c.forEach(function(a){d[a]&&(f[a]=d[a])}),f}return d}},738:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.Err={Abort:"AbortError"};e=a.CSA_HIT_TYPE={};e.CLICK_SUCCESS="click_success";e.CLICK_ERROR="click_error";e.CLICK_CANCEL="click_cancel";e.SHARE="share";e.CUSTOMIZE_SHARE=
"click_customize_success";a.customize="customize";a.customShareOptions="customShareOptions";a.customizeShareStateKey="customizeShareCSAData";a.CSA_DEFAULT_VALUE={string:"unknown",number:0,boolean:2};a.UNKNOWN="unknown";a.DEFAULT_CSA_REF_ID="u_";a.EMPTY_STRING="";a.RAW_CHANNEL_PREFIX="raw:";a.CP_CHANNEL_REF="cp";a.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF="cso_cp";a.CUSTOM_SHARE_OPTIONS_REF_PREFIX="cso";a.BOOKS_REF_PREFIX="bks";a.CAF_REF_PREFIX="caf";a.EMBED_CHANNEL_REF="eb";a.FALSE="false";a.TRUE="true";
a.CUSTOM_SHEET_CLICK_LATENCY_METRIC="CustomShareSheet.Click";a.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Caf.CustomShareSheet.Click";a.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Books.CustomShareSheet.Click";a.SSF_AUI_PACKAGE_ATTRIBUTION="SocialShareWidgetAUI";a.REGEX_TO_REF_ID_AND_CHANNEL_APP={instagram:{refId:"in",channel:"Instagram"},snap:{refId:"sn",channel:"Snapchat"},discord:{refId:"di",channel:"Discord"},viber:{refId:"vi",channel:"Viber"},telegram:{refId:"te",channel:"Telegram"},pinterest:{refId:"pi",
channel:"Pinterest"},qzone:{refId:"qz",channel:"QQ Zone"},renren:{refId:"re",channel:"Renren"},twitter:{refId:"tw",channel:"Twitter"},airdrop:{refId:"ar",channel:"AirDrop"},tencentweibo:{refId:"tc",channel:"Tencent Weibo"},wechatmoment:{refId:"wm",channel:"WeChat Moment"},line:{refId:"li",channel:"Line"},whatsapp:{refId:"wa",channel:"Whatsapp"},weibo:{refId:"si",channel:"Sina Weibo"},facebook:{refId:"fb",channel:"Facebook"}};a.defaultShareDataAttributes={isInternal:a.CSA_DEFAULT_VALUE.boolean,isRobot:a.CSA_DEFAULT_VALUE.boolean,
userAgent:a.CSA_DEFAULT_VALUE.number,platform:a.CSA_DEFAULT_VALUE.string,ingress:a.CSA_DEFAULT_VALUE.string,asin:a.CSA_DEFAULT_VALUE.string,requestId:a.CSA_DEFAULT_VALUE.string,customerId:a.CSA_DEFAULT_VALUE.string,marketplaceId:a.CSA_DEFAULT_VALUE.string};a.defaultCustomizeShareCSAData={backgroundImagePhysicalId:a.EMPTY_STRING,deviceCoverImagePhysicalId:a.EMPTY_STRING,hasQuote:a.EMPTY_STRING,isCustomizedExperienceEnabled:a.EMPTY_STRING,isCustomized:a.EMPTY_STRING}},905:function(e,a,l){Object.defineProperty(a,
"__esModule",{value:!0});a.isSafari=a.isCSALoaded=a.isNativeAppShareAvailable=a.isNativeWebShareAvailable=a.isMobileWeb=a.isMobileApp=a.isDesktop=a.isIOS=a.isAndroid=a.isIE=a.isAUILoaded=a.isUeAvailable=a.isClipboardAvailable=a.isRTL=a.isTwisterAsin=a.context=a.Device=void 0;var c,d=l(161);!function(a){a.Android="apan";a.IOS="apin";a.MWeb="mwn";a.Other="ud"}(c||(a.Device=c={}));a.context=function(){var d=c.Other;(0,a.isMobileApp)()&&(0,a.isAndroid)()?d=c.Android:(0,a.isMobileApp)()&&(0,a.isIOS)()?
d=c.IOS:(0,a.isMobileWeb)()&&(d=c.MWeb);var b="unknown";return(0,a.isMobileApp)()?b="mshop":(0,a.isMobileWeb)()?b="mweb":(0,a.isDesktop)()&&(b="desktop"),{device:d,page:(0,a.isUeAvailable)()?g.ue_pty:"unknown",subPage:(0,a.isUeAvailable)()?g.ue_spty||g.ue_pti:"unknown",platform:b}};a.isTwisterAsin=function(){return!!g.isTwisterPage||!!g.twisterController||f};a.isRTL=function(){return"rtl"===document.dir};a.isClipboardAvailable=function(){return!!navigator.clipboard&&(0,d.isFunction)(navigator.clipboard.writeText)};
a.isUeAvailable=function(){return!!g.ue};a.isAUILoaded=function(){var a;return"undefined"!=typeof g&&(0,d.isString)(null===(a=null===g||void 0===g?void 0:g.P)||void 0===a?void 0:a.AUI_BUILD_DATE)};a.isIE=function(){return(0,d.testUserAgent)(/MSIE|Trident/i)};a.isAndroid=function(){return(0,d.testUserAgent)(/android.([1-9]|[L-Z])/i)&&!(0,d.testUserAgent)(/trident|Edge/i)};a.isIOS=function(){return(0,d.testUserAgent)(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!(0,d.testUserAgent)(/trident|Edge/i)};
a.isDesktop=function(){return!((0,a.isAndroid)()||(0,a.isIOS)()||(0,a.isMobileApp)()||(0,a.isMobileWeb)())};a.isMobileApp=function(){return/(Windowshop|Amazon|Amazon\.com)\//.test((0,d.getCookie)("amzn-app-id"))};a.isMobileWeb=function(){return 450>=g.screen.availWidth&&((0,d.testUserAgent)(/mobile|mini/i)||(0,a.isAndroid)()||(0,a.isIOS)())};a.isNativeWebShareAvailable=function(){return g.navigator&&(0,d.isFunction)(g.navigator.share)};a.isNativeAppShareAvailable=function(a){return a&&(0,d.isFunction)(a.share)};
a.isCSALoaded=function(){return(0,d.isFunction)(g.csa)};a.isSafari=function(){var a;return/apple/i.test(null===(a=g.navigator)||void 0===a?void 0:a.vendor)};var f=!1;(0,a.isAUILoaded)()&&g.P.when("mobile-inline-twister-critical").execute(function(){f=!0});a.default={context:a.context,isTwisterAsin:a.isTwisterAsin,isClipboardAvailable:a.isClipboardAvailable,isUeAvailable:a.isUeAvailable,isAUILoaded:a.isAUILoaded,isIE:a.isIE,isAndroid:a.isAndroid,isDesktop:a.isDesktop,isIOS:a.isIOS,isMobileApp:a.isMobileApp,
isMobileWeb:a.isMobileWeb,isNativeWebShareAvailable:a.isNativeWebShareAvailable,isNativeAppShareAvailable:a.isNativeAppShareAvailable,isCSALoaded:a.isCSALoaded,isSafari:a.isSafari,isRTL:a.isRTL}},495:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});var c=l(905),d=l(353),f=l(738);e=function(){function a(){}return a.logCountOnce=function(a){(0,c.isUeAvailable)()&&g.ue.count(a,(g.ue.count(a)||0)+1)},a.emitFullMetricName=function(a,d,f){var b=this;(0,c.isAUILoaded)()&&g.P.when("A").execute(function(c){c.trigger("".concat(b.BASE_METRIC_NAME,
":metrics:logged"),{fullMetricName:a,callee:d,message:f})})},a.logCounter=function(a,c){c=c?".".concat(c):"";a="".concat(this.BASE_METRIC_NAME,".").concat(a).concat(c);this.emitFullMetricName(a,"logCounter");this.logCountOnce(a)},a.logCounterRefactor=function(a,c){c=c?".".concat(c.toLowerCase()):"";a="".concat(this.BASE_METRIC_NAME).concat(c,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());this.emitFullMetricName(a,"logCounterRefactor");this.logCountOnce(a)},a.logLoad=
function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());this.logCountOnce(a)},a.logFatal=function(a){(0,c.isAUILoaded)()&&g.P.log(a,"FATAL",this.BASE_METRIC_NAME)},a.logCSAEvent=function(a,f){(0,c.isCSALoaded)()&&(new d.default).withCSAClickEventData(f).withShareHitType(a).logEvent()},a.startTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(a);this.timers[a]=g.uet&&g.uet("bb",a,{wb:1})},a.stopTimer=
function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(a);var b=this.timers[a];(0,c.isUeAvailable)()&&b&&(b=g.uet("be",a,{wb:1})-b,g.ue.count(a,b),g.uex&&g.uex("ld",a,{wb:1}),this.emitFullMetricName(a,"stopTimer","".concat(b,"ms")),delete this.timers[a],this.timers["".concat(a,"_done_in")]=b)},a.BASE_METRIC_NAME="SocialShareFramework",a.LATENCY="Latency",a.platform=f.UNKNOWN,a.metricName="",a.timers={},a.getMetricName=function(b,d){var f;if(void 0===d&&(d=""),(0,c.isUeAvailable)()){var e=
(0,c.context)();a.platform=e.platform;a.metricName=d?".".concat(d.toLowerCase()):""}b=b('[data-action\x3d"ssf-share-icon"]').data();d=d?".".concat(d):"";return b?(b=(null===(f=b.ssfShareIcon)||void 0===f?void 0:f.shareDataAttributes)||{},f=b.ingress,b=b.platform,b=void 0===b?"unknown":b,"".concat(void 0===f?"unknown":f,".").concat(b).concat(d).toLowerCase()):""},a}();a.default=e},241:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});var c,d=l(905),f=l(738);!function(a){a.RETURN="r";
a.CLICK="cl"}(c||(c={}));e=function(){function a(a,c){if(void 0===a&&(a="ur"),void 0===c&&(c=void 0),this.PREFIX="cm_sw",this.id="",this.refId="",this.cxt={device:d.Device.Other,page:"",subPage:"",platform:f.UNKNOWN},2>a.length)throw new TypeError("refId must be 2 or more characters long");this.refId=a;this.cxt=(0,d.context)();this.treatment=c;this.generateUniqueId()}return Object.defineProperty(a.prototype,"return",{get:function(){return this.get(c.RETURN)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,
"click",{get:function(){return this.get(c.CLICK)},enumerable:!1,configurable:!0}),a.prototype.getReturnForChannel=function(a){var b=this.treatment?"".concat(this.treatment,"_"):"";return"".concat(this.PREFIX,"_").concat(c.RETURN,"_").concat(a,"_").concat(this.cxt.device,"_").concat(this.refId,"_").concat(b).concat(this.id)},a.prototype.getClickForChannel=function(a){return"".concat(this.PREFIX,"_").concat(c.CLICK,"_").concat(a,"_").concat(this.cxt.device,"_").concat(this.refId,"_").concat(this.id)},
a.prototype.generateUniqueId=function(){var a,c=null===(a=null===g||void 0===g?void 0:g.ue)||void 0===a?void 0:a.rid;return c||(c="".concat(Math.random().toString(36).slice(2)).concat(Math.random().toString(36).slice(2)).substring(0,13)),this.id=c},a.prototype.get=function(a){var b=this.treatment?"".concat(this.treatment,"_"):"";return"".concat(this.PREFIX,"_").concat(a,"_").concat(this.cxt.device,"_").concat(this.refId,"_").concat(b).concat(this.id)},a}();a.default=e},198:function(e,a,l){var c=this&&
this.__assign||function(){return c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var f in b=arguments[c])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a},c.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0});var d,f=l(495),h=l(905),b=l(474),v=l(161),p=l(738);(0,h.isAUILoaded)()&&g.P.when("mash").execute(function(a){return d=a});e=function(){function a(a){this.sheetOptions={title:p.EMPTY_STRING,text:p.EMPTY_STRING,shareUrl:new b.default("http://amazon.com/",
"ur"),lang:"en",shareDataAttributes:p.defaultShareDataAttributes,refererURL:"",image:"",customizeShareCSAData:p.defaultCustomizeShareCSAData,isCustomShareOptionsSheetEnabled:!1};this.sheetOptions=c(c({},this.sheetOptions),a);this.shareUrl=a.shareUrl}return a.prototype.launchNativeWeb=function(){var a,b=this,c=this.sheetOptions.shareDataAttributes.ingress,d={channel:p.EMPTY_STRING,refMarker:this.shareUrl.refMarker.click,refererURL:this.sheetOptions.refererURL,shareDataAttributes:this.sheetOptions.shareDataAttributes,
customizeShareCSAData:this.sheetOptions.customizeShareCSAData},e=this.shareUrl.return;this.sheetOptions.tinyUrl&&(e=this.sheetOptions.tinyUrl,f.default.logCounter("MWeb.Tiny.Success"),f.default.logCounterRefactor("Tiny.Success",c));var l=(0,v.isFunction)(this.sheetOptions.sheetShownCallback);try{null===(a=null===g||void 0===g?void 0:g.navigator)||void 0===a||a.share({url:e,title:this.sheetOptions.title,text:this.sheetOptions.text}).then(function(){l&&b.sheetOptions.sheetShownCallback();f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_SUCCESS,
d);f.default.logCSAEvent(p.CSA_HIT_TYPE.SHARE,d);(0,v.isFunction)(b.sheetOptions.incrementShareCount)&&b.sheetOptions.incrementShareCount(d.refMarker);f.default.logCounterRefactor("ChannelClick",b.sheetOptions.shareDataAttributes.ingress);f.default.logCounter("ShareClick")}).catch(function(a){l&&b.sheetOptions.sheetShownCallback();f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_SUCCESS,d);a.name===p.Err.Abort&&f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_CANCEL,d)})}catch(C){f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_ERROR,
d)}},a.prototype.launchNativeApp=function(){var a=this,b=this.shareUrl.refMarker.click,e=this.sheetOptions.shareDataAttributes,l=this.sheetOptions.refererURL,h=this.sheetOptions.customizeShareCSAData,g=this.sheetOptions.shareDataAttributes.ingress,q=p.EMPTY_STRING,n=this.sheetOptions.caf||!1,m=this.sheetOptions.cafSwitchEnabled||!1,y=this.sheetOptions.isCustomShareOptionsSheetEnabled||!1,w=this.shareUrl.return,E=(0,v.isFunction)(this.sheetOptions.incrementShareCount);this.sheetOptions.tinyUrl&&(w=
this.sheetOptions.tinyUrl,f.default.logCounter("MShop.Tiny.Success"),f.default.logCounterRefactor("Tiny.Success",g));var x={channel:q,refMarker:b,refererURL:l,shareDataAttributes:e,customizeShareCSAData:h,caf:n,cafSwitchEnabled:m,isCustomShareOptionsSheetEnabled:y};e={messagePlain:this.getShareMessage,messagePlain160:this.getShare160Message,messagePlain140:this.getShare140Message,messageHTML:this.getShareMessage,url:w,imageURL:this.sheetOptions.image,subject:this.sheetOptions.text};null==d||d.share(c(c({},
e),{successCallback:function(){(0,v.isFunction)(a.sheetOptions.sheetShownCallback)&&a.sheetOptions.sheetShownCallback();f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_SUCCESS,x)},failCallback:function(){f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_ERROR,x)},shareServiceSelectedCallback:function(c){c&&"'null'"!==c?((0,v.isFunction)(a.sheetOptions.channelSelectCB)&&a.sheetOptions.channelSelectCB(c),x.channel=a.getChannelByKeyword(c).channel,c=a.getChannelByKeyword(c).refId,x.refMarker=a.shareUrl.refMarker.getClickForChannel(c),
f.default.logCSAEvent(p.CSA_HIT_TYPE.SHARE,x),f.default.logCounterRefactor("ChannelClick",a.sheetOptions.shareDataAttributes.ingress),f.default.logCounter("ShareClick"),(0,v.isFunction)(a.sheetOptions.sdTooltipCallback)&&a.sheetOptions.sdTooltipCallback(),E&&a.sheetOptions.incrementShareCount(b)):("MSHOP_ANDROID"===a.sheetOptions.shareDataAttributes.platform&&E&&a.sheetOptions.incrementShareCount(b),f.default.logCSAEvent(p.CSA_HIT_TYPE.CLICK_CANCEL,x))}}))},a.prototype.launch=function(a){(0,h.isNativeAppShareAvailable)(d)?
this.launchNativeApp():(0,h.isNativeWebShareAvailable)()?this.launchNativeWeb():(0,v.isFunction)(a)?a():(f.default.logCounter("Click.ShareUnavailable"),f.default.logCounterRefactor("Click.ShareUnavailable",this.sheetOptions.shareDataAttributes.ingress))},Object.defineProperty(a.prototype,"getShare160Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return;g.P.now("SocialShareWidgetTitleOnly").execute(function(b){a=b?"[amazon160]":a});var b=a.length+2;b=(0,v.truncate)(this.sheetOptions.title,
160-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"getShare140Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return;g.P.now("SocialShareWidgetTitleOnly").execute(function(b){a=b?"[amazon140]":a});var b=a.length+2;b=(0,v.truncate)(this.sheetOptions.title,140-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),a.prototype.getRefByRegex=function(a){return p.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].refId},a.prototype.getChannelByRegex=
function(a){return p.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].channel},a.prototype.getChannelByKeyword=function(a){var b=p.RAW_CHANNEL_PREFIX+a,c=p.DEFAULT_CSA_REF_ID,d=a.match(/instagram|snap|discord|viber|telegram|pinterest|qzone|renren|twitter|airdrop|tencentweibo|wechatmoment|line|whatsapp|weibo|^Facebook$/ig);if(d&&d.length)return{channel:this.getChannelByRegex(d[0].toLowerCase()),refId:this.getRefByRegex(d[0].toLowerCase())};switch(!0){case /android.messaging|sms|android.apps.messaging|mms/gi.test(a):b=
"SMS";c="sm";break;case /outlook|mail/gi.test(a):b="Email";c="em";break;case /clipboardactivity|copy/gi.test(a):b="Copy";c="cp";break;case /facebook.composer/gi.test(a):b="Facebook";c="fb";break;case /facebook.messenger|FacebookMessenger/gi.test(a):b="FacebookMessenger";c="fm";break;case /tencent|wechat/gi.test(a):b="WeChat";c="we";break;case /unknown|null/gi.test(a):b="unknown",c="u"}return{channel:b,refId:c}},Object.defineProperty(a.prototype,"getShareMessage",{get:function(){var a=this.sheetOptions.tinyUrl||
this.shareUrl.return;return g.P.now("SocialShareWidgetTitleOnly").execute(function(b){a=b?"[amazon]":a}),"".concat(this.sheetOptions.title," ").concat(a)},enumerable:!1,configurable:!0}),a}();a.default=e},474:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});var c=l(241);e=function(){function a(d,e,b){this.REF_PARAM_NAME="ref_";a.isValid(d)||(d=a.getDefault());this.url=new URL(d);this._refMarker=new c.default(e,b)}return a.prototype.getUpdatedUrl=function(a){var c=new URL(this.raw);
return c.searchParams.set(this.REF_PARAM_NAME,a),c.toString()},Object.defineProperty(a.prototype,"raw",{get:function(){return this.url.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refMarker",{get:function(){return this._refMarker},enumerable:!1,configurable:!0}),a.isValid=function(a){try{new URL(a)}catch(y){return!1}return!0},a.getDefault=function(){var a,c,b=null===(a=null===g||void 0===g?void 0:g.location)||void 0===a?void 0:a.href;if(!b)return(null===(c=null===
g||void 0===g?void 0:g.ue)||void 0===c?0:c.sn)?"https://".concat(g.ue.sn):"https://amazon.com";a=new URL(b);c=a.searchParams.has("psc")?"?psc\x3d1":"";return g.ue_pti?"".concat(g.location.origin,"/dp/").concat(g.ue_pti).concat(c):(a.search=c,a.href)},a.prototype.getReturnForChannel=function(a){a=this._refMarker.getReturnForChannel(a);return this.getUpdatedUrl(a)},a.prototype.getClickForChannel=function(a){a=this._refMarker.getClickForChannel(a);return this.getUpdatedUrl(a)},Object.defineProperty(a.prototype,
"return",{get:function(){return this.getUpdatedUrl(this._refMarker.return)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.getUpdatedUrl(this._refMarker.click)},enumerable:!1,configurable:!0}),a}();a.default=e},161:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.getDPXObject=a.getCookie=a.testUserAgent=a.truncate=a.isString=a.isEmpty=a.isNumber=a.isFunction=void 0;a.isFunction=function(a){return"function"==typeof a};a.isNumber=
function(a){return!isNaN(a)&&"number"==typeof a};a.isEmpty=function(a){return!a||!a.length};a.isString=function(a){return"string"==typeof a};a.truncate=function(a,c){void 0===a&&(a="");var d=Array(3).fill(".");return a.length>c?a.substring(0,c-3)+d.join(""):a};a.testUserAgent=function(a){if(!g&&!g.navigator)return!1;try{return a.test(g.navigator.userAgent)}catch(c){return!1}};a.getCookie=function(a){a="".concat(a,"\x3d");for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==
e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return""};a.getDPXObject=function(){var a,c;return null===(c=null===(a=g.DetailPage)||void 0===a?void 0:a.StateController)||void 0===c?void 0:c.state};a.default={isFunction:a.isFunction,isNumber:a.isNumber,isEmpty:a.isEmpty,isString:a.isString,truncate:a.truncate,testUserAgent:a.testUserAgent,getCookie:a.getCookie,getDPXObject:a.getDPXObject}},156:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=
{}},519:function(e,a,h){Object.defineProperty(a,"__esModule",{value:!0});a.SocialShareCore=void 0;e=h(305);var c=h(474),d=h(156),f=h(495),g=h(198),b=h(241),v=h(905);h=h(738);a.SocialShareCore={Channels:e.default,Url:c.default,Translations:d.default,Metrics:f.default,ShareSheet:g.default,RefMarker:b.default,Detection:v.default,Constants:h};a.default=a.SocialShareCore}},z={};e=function l(a){var c=z[a];if(void 0!==c)return c.exports;c=z[a]={exports:{}};return h[a].call(c.exports,c,c.exports,l),c.exports}(519)})();
return e});"use strict";u.register("SocialShareWidgetConfig",function(){var e=Object.freeze({MODAL:"modal",POPOVER:"popover"}),h=Object.freeze({IOS:"ios",ANDROID:"android",ARROW:"arrow",VARIABLE:"variable"});return{WIDGET_TYPE:e,WIDGET_ICON:h,excludedChannels:["sms","wa"],lineMarketplaces:["A1VC38T7YXB528"],cnMarketplace:["AAHKV2X7AFYLW"],nonCNChannels:["fb","tw","pi"],defaultShareData:{url:"",title:location.hostname,text:"",image:"",hashtags:["Amazon"],type:e.POPOVER,lang:"en",refId:"ts",channels:[],
refererURL:"",treatment:"",weblab:"",customize:!1,caf:!1,cafSwitch:!1,cafStarAlignmentLeft:!1,cafCustomShareOptionsEnabled:!1,cafIngressId:"",t:{},associateLink:{},popoverPosition:"triggerBottom",popoverDistance:48,defaultCustomShareOptions:{email:{label:"Email",image:"customchannels-email.png",ref:"em",shareUrl:"mailto:?subject\x3d{subject}\x26body\x3d{body}\x26url\x3d{url}",className:"email",stringId:"taf_customshare_email"},copy:{label:"Copy",image:"customchannels-link.png",ref:"cp",shareUrl:"",
className:"custom-share-copy",stringId:"taf_customshare_copy"},more:{label:"More",image:"customchannels-more.png",ref:"",shareUrl:"",className:"custom-share-native-sheet",stringId:"taf_customshare_more"}},isFallbackShareUrlEnabled:!1,isFlipStarsLeft:!1,isNewIMessagePreview:!1,isCafPreviewGenerationMigrationEnabled:!1,isUnrecognizedUsersRichPreviewEnabled:!1,customizePreSelected:!1},defaultWidgetData:{icon:h.VARIABLE,background:!0,width:24},shareDataAttributes:{isInternal:2,isRobot:2,userAgent:g.navigator.userAgent,
platform:"DESKTOP",ingress:g.ue_pty,asin:g.ue_pti,requestId:g.ue_id,customerId:g.opts&&g.opts.customerId,marketplaceId:g.ue_mid,triggeredFromScreenshotToast:!1},iconMap:{ios:"https://m.media-amazon.com/images/G/01/share-icons/share-std.svg",android:"https://m.media-amazon.com/images/G/01/share-icons/share-android.svg",arrow:"https://m.media-amazon.com/images/G/01/share-icons/share-icon-experiment.svg"},customShareOptions:[]}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetTemplating",
"SocialShareWidgetConfig","SocialShareWidgetState").register("SocialShareWidgetAUI",function(e,m,z,q,a){var l=m.SocialShareCore,c=l.Metrics,d=0,f=function(){},y=!1,b=c.getMetricName(e.$),v=e.constants.HIDE_CLASS;c.startTimer(b);c.logCounter("DPX.Desktop.ImageBlockRender");try{(function(){var p=e.$,x=l.Detection,k=l.Translations,r=l.Channels,A=l.ShareSheet,B=l.Url,t=l.Constants,m=function(a){a=a.data("share")||a.find("[data-share]").data("share");return e.extend({},q.defaultWidgetData,a)},C=p(".ssf-share-trigger"),
n=q.defaultShareData,D=m(C),K=n.url,w=p("#ac-getlink-bottomsheet"),E=p('[data-action\x3d"ssf-share-icon"]'),Y=function(){var a=q.iconMap;return D.icon===q.WIDGET_ICON.ARROW?a.arrow:x.isDesktop()?a.ios:D.icon===q.WIDGET_ICON.VARIABLE?x.isIOS()?a.ios:a.android:a[D.icon]},Z=function(a){a.find('[class*\x3d"ssf-multi-"]').length||a.find(".ssf-share-trigger").addClass("ssf-multi-"+Math.random().toString(36).slice(2));C=a.find('[class*\x3d"ssf-multi-"]')},G=void 0,Q=void 0,H=void 0,M=void 0,S=void 0,I=void 0,
F=void 0;u.when("a-sheet").execute(function(a){return G=a});u.when("a-popover").execute(function(a){return Q=a});u.when("a-modal").execute(function(a){return H=a});u.when("SocialShareWidgetTiny").execute(function(a){return F=a});var N=function(a,b){var c=2<arguments.length&&arguments[2]!==h?arguments[2]:"ssf-share-bottom-sheet",d=n.customize||n.caf;if(!M||d)M=G.create({name:c,inlineContent:a,closeType:"icon",height:b});G.showSheet(M)},O=function(a){var b=a.type===q.WIDGET_TYPE.POPOVER&&Q,c=a.type===
q.WIDGET_TYPE.MODAL&&H;a=z.build(a);G?N(a.getBottom()):b?(b=a.getPopover(),C.hasClass("a-declarative")||(S=Q.create(C,{name:"ssf-share-popover",position:n.popoverPosition,inlineContent:b,activate:"onclick",closeButton:!1,width:160,padding:"none",popoverLabel:"Share Popup",closeButtonLabel:"Close Share Popup"}).show())):c&&(b=a.getModal(),C.hasClass("a-declarative")||(I=H.create(C,{inlineContent:b,width:600}).show()))},U=function(a){if(a.customize||a.caf)c.logCounter("webview.sharesheet.caf.background"),
c.logCounterRefactor("webview.sharesheet.caf.background",a.shareDataAttributes.ingress),u.when("mash").execute(function(a){a.addEventListener("appPause",T)})},P=function(a){u.when("SocialShareWidgetCustomize").execute(function(b){z.build(a).getCustomize(function(c){N(c,650,"ssf-customize-bottom-sheet");b.init(a,O,T);U(a)})})},T=function da(){u.when("mash").execute(function(a){a.removeEventListener("appPause",da)});S&&Q.get(C).hide();M&&G.hideSheet(M);I&&H.get(C).hide()},aa=function(){var a=n.shareDataAttributes.asin,
b=g.DetailPage;if(!b)return!1;b=b.StateController&&b.StateController.getState().current_asin;n.shareDataAttributes.asin="string"==typeof b?b:a;return a!==b},R=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(v);a.find("i").hide()},V=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(v);a.find("i").show()},ca=function(a,d,k){var h=a.shareDataAttributes,f=a.t;c.logCSAEvent(t.CSA_HIT_TYPE.SHARE,d);c.logCounter("DPX.Desktop.CopySuccess");c.logCounter("Share.CopySuccess");
c.logCounter(b,"CopySuccess");c.logCounterRefactor("CopySuccess",h.ingress);x.isDesktop()?function(){var a=k.find(".copy-label");a.text(f.taf_copy_url_changeover);e.delay(function(){T();a.text(f.taf_copy_name)},1E3)}():(p(".ssf-feedback").show(),T())},W=function(a){c.logCSAEvent(t.CSA_HIT_TYPE.CLICK_ERROR,a);c.logCounter("DPX.Desktop.CopyFailure");c.logCounter("Share.CopyFailure");c.logCounter(b,"CopyFailure")},X=function(a){var b=a.shareData,k=a.channelRef,e=b.shareUrl;a=b.socialLinks;var f=a===
h?{}:a;a=b.isOGTEnabled;a=a===h?!1:a;var p=b.dealsPreviewEnabled;p=p===h?!1:p;var r=b.eventPreviewTreatment;r=r===h?"C":r;k=k?e.getReturnForChannel(k):e.return;e=f.shareframework||b.url;f=b.aapiBaseUrl;f=f===h?"":f;var t=b.shareAapiCsrfToken;t=t===h?"":t;var n=b.tinyUrlEnabled;n=n===h?!1:n;var g=b.deeplinkInfo;g=g===h?{}:g;var w=b.storeId;w=w===h?"":w;var v=b.shareDataAttributes,l=v.marketplaceId;l=l===h?"":l;v=v.ingress;v=v===h?"":v;b.isUnrecognizedUsersRichPreviewEnabled&&(k=new URL(k),k.searchParams.append("starsLeft",
1),k=k.toString());"c"!==r.toLowerCase()&&(k=new URL(k),b=r.match(/^T(\d+)$/),k.searchParams.append("peakEvent",b[1]),k.searchParams.append("dealEvent",p?"1":"0"),k=k.toString(),c.logCounterRefactor("EventPreview"+r,v));return{tinyUrlEnabled:n,aapiBaseUrl:f,shareAapiCsrfToken:t,marketplaceId:l,url:k,isOGTEnabled:a,originalUrl:e||k,refMarkerId:d++,deeplinkInfo:g,storeId:w}};p(document).delegate(".ssf-channel:not(.copy,.embed)","click",function(a){a.preventDefault();a.stopPropagation();c.logCounter("DPX.Desktop.ChannelClick");
c.logCounter("ShareClick");c.logCounter(b,"ChannelClick");c.logCounterRefactor("ChannelClick",n.shareDataAttributes.ingress);var d=p(this),k=d.data("key"),f=n;a=f.refererURL;var r=f.shareDataAttributes,w=f.treatment;w=w===h?"":w;var v=f.weblab;v=v===h?"":v;var l=f.builtChannels[k],A=l.ref;k=f.shareUrl.refMarker.getClickForChannel(A);f=l.name;var B=l.getSharingUrl();c.logCSAEvent(t.CSA_HIT_TYPE.SHARE,{channel:f,refMarker:k,refererURL:a,shareDataAttributes:r,treatment:w,weblab:v});a=X({shareData:n,
channelRef:A});R(d);F.fetch({data:a,callback:function(a){V(d);a&&(B=l.getSharingUrl(a),c.logCounter("Desktop.Tiny.Success"),c.logCounterRefactor("Tiny.Success",r.ingress));if("em"===A)g.open(B,"_self");else if(x.isDesktop()){a=screen.width;var b=screen.height,k="pi"===A?900:600,f=Math.min(k,.7*a);k=Math.min(k,.7*b);g.open(B,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+f+",height\x3d"+k+",top\x3d"+(b/2-k/2)+",left\x3d"+(a/2-f/2))}else g.open(B,"_blank");T();e.trigger("ssf:event:share",n)}})});e.declarative("ssf-share-icon",
"click",function(d){c.logCounter("DPX.Desktop.SheetClick");c.logCounter("SheetClick");c.logCounter(b,"SheetClick");if(y)return T();Z(d.$currentTarget);n=e.extend(n,d.data);n.shareDataAttributes=e.extend(q.shareDataAttributes,d.data.shareDataAttributes);var f=n.shareDataAttributes.ingress;c.logCounterRefactor("SheetClick",f);if(!e.objectIsEmpty(d.data.associateLink)&&w.length)c.logCounter("SheetClick.Associate"),e.trigger("ac-getlink-bottomsheet-event",n);else{e.extend(k[n.lang],n.t);var h=r(n,n.channels);
n.builtChannels=h;n.url=n.url.startsWith("/")?""+g.location.origin+n.url:n.url;n.shareUrl=new B(n.url,n.refId);aa()&&(n.shareUrl=new B(n.url,n.refId),n.shareUrl.url.searchParams.set("psc",1));a.set("shareData",n);x.isDesktop()?(n.isUnrecognizedUsersRichPreviewEnabled&&n.shareUrl.url.searchParams.set("starsLeft",1),n.image=n.image||p("#imgTagWrapperId img").attr("src"),O(n),c.logCounter("DPX.Desktop.SheetOpen"),c.logCounter("SheetOpen"),c.logCounter(b,"SheetOpen"),c.logCounterRefactor("SheetOpen",
f),c.logCSAEvent(t.CSA_HIT_TYPE.CLICK_SUCCESS,{channel:t.EMPTY_STRING,refMarker:n.shareUrl.refMarker.click,refererURL:n.refererURL,shareDataAttributes:n.shareDataAttributes,treatment:n.treatment||"",weblab:n.weblab||""})):n.customize||n.caf?P(n):(R(d.$currentTarget),h=X({shareData:n}),n=e.extend(n,{sheetShownCallback:function(){V(d.$currentTarget)}}),F.fetch({data:h,callback:function(a){n.tinyUrl=a;(new A(n)).launch(function(){O(n);c.logCounter("DPX.Desktop.SheetOpen");c.logCounter("SheetOpen");c.logCounter(b,
"SheetOpen");c.logCounterRefactor("SheetOpen",f);V(d.$currentTarget)})}}));x.isSafari()&&x.isDesktop()&&(h=X({shareData:n,channelRef:t.CP_CHANNEL_REF}),F.fetch({data:h,callback:function(a){c.logCounter("TinyUrlOnSheetOpen");K=a}}));e.trigger("ssf:event:sheetOpen",n)}});p(document).delegate(".ssf-copy,.ssf-channel.copy","click",function(a){c.logCounter("ShareClick");c.logCounter("DPX.Desktop.ChannelClick");c.logCounter(b,"ChannelClick");c.logCounterRefactor("ChannelClick",n.shareDataAttributes.ingress);
a.preventDefault();var d=n;a=d.shareUrl;var k=d.shareDataAttributes,f=d.treatment;f=f===h?"":f;d=d.weblab;d=d===h?"":d;var r=t.CP_CHANNEL_REF,w=a.refMarker.getClickForChannel(r),v={channel:t.CP_CHANNEL_REF,refMarker:w,shareDataAttributes:k,treatment:f,weblab:d},g=p(this),l=a.getReturnForChannel(r);x.isSafari()&&x.isDesktop()?navigator.clipboard.writeText(K||l).then(function(){ca(n,v,g)},function(){W(v)}):(a=X({shareData:n,channelRef:r}),R(g),F.fetch({data:a,callback:function(a){V(g);navigator.clipboard.writeText(a||
l).then(function(){ca(n,v,g)},function(){W(v)})}}));e.trigger("ssf:event:share",n)});p(document).delegate(".ssf-embed,.ssf-channel.embed","click",function(a){a.preventDefault();var d=n;a=d.shareDataAttributes;var k=d.treatment;k=k===h?"":k;var e=d.weblab;e=e===h?"":e;d={channel:"embed",refMarker:d.shareUrl.refMarker.getClickForChannel(t.EMBED_CHANNEL_REF),shareDataAttributes:a,treatment:k,weblab:e};c.logCSAEvent(t.CSA_HIT_TYPE.SHARE,d);c.logCounter("DPX.Desktop.ChannelClick");c.logCounter(b,"ChannelClick");
c.logCounter("ChannelClick.Embed");c.logCounter("ShareClick");c.logCounterRefactor("ChannelClick",a.ingress);H.create(p(".ssf-channel.embed"),n.kpModalParams).show()});f=function(){C=p(".ssf-share-trigger");D=m(C);var a=D.width;if(!p(".ssf-background").length&&D.background){var b=1.4*a;b=p('\x3cdiv class\x3d"ssf-background'+(D.floatedIcon?"-float":"")+'"\x3e\x3c/div\x3e').css({width:b,height:b});C.wrap(b)}D.icon&&C.css({height:a,width:a,backgroundImage:"url("+Y()+")"})};x.isIE()&&p(".ssf-share-trigger,.ssf-background").remove();
e.on("a:popover:afterUpdatePosition:ssf-share-popover",function(a){a=a.popover.$popover;var b=a.position().left-n.popoverDistance;a.find(".a-arrow-border").css({right:24,left:""});a.css({left:b})});e.on("ssf:event:trigger-share-widget",function(a){e.trigger("a:declarative:ssf-share-icon:click",{data:a,$currentTarget:(1<arguments.length&&arguments[1]!==h?arguments[1]:h)||E})});e.on("a:popover:show:ssf-share-popover",function(){return y=!0});e.on("a:popover:hide:ssf-share-popover",function(){return y=
!1});e.on("a:sheet:beforeShow:ssf-customize-bottom-sheet",function(a){a.sheet.$container.css("height","")});f()})()}catch(p){c.logCounter("DPX.Desktop.Error"),c.logCounter(b,"Error"),c.logLoad("Error"),c.logFatal("Error loading Share Framework AUI: "+p.toString())}finally{c.logCounter("DPX.Desktop.Render"),c.logCounter(b,"Render"),c.logLoad("Render"),e.trigger("ssf:event:load"),c.stopTimer(b)}return{init:f}});"use strict";var ba=function(){return function(e,g){if(Array.isArray(e))return e;if(Symbol.iterator in
Object(e)){var m=[],q=!0,a=!1,l=h;try{for(var c=e[Symbol.iterator](),d;!(q=(d=c.next()).done)&&(m.push(d.value),!g||m.length!==g);q=!0);}catch(f){a=!0,l=f}finally{try{if(!q&&c["return"])c["return"]()}finally{if(a)throw l;}}return m}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();u.when("A","SocialShareWidgetConfig","SocialShareWidget").register("SocialShareWidgetTemplating",function(e,g,z){z=z.SocialShareCore;var q=e.$,a=z.Detection.isClipboardAvailable,l=z.Detection.isDesktop,
c=g.excludedChannels;a()||c.push("copy");var d=function(a){return'\x3cspan class\x3d"a-spinner a-spinner-'+a+' a-align-center aok-hidden"\x3e\x3c/span\x3e'};return{build:function(e){var f=e.shareUrl,b=e.socialLinks,v=b===h?{}:b;b=e.shareDataAttributes;var p=e.builtChannels,x=e.kpModalParams,k=e.t;v.email=e.mailToUri;var r='\x3cspan class\x3d"a-button ssf-copy"\x3e\n        \x3cspan class\x3d"a-button-inner"\x3e\n          \x3cinput class\x3d"a-button-input" type\x3d"button"\x3e\n          \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\n            \x3cdiv class\x3d"copy-label"\x3e'+
k.taf_copy_tooltip+"\x3c/div\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/span\x3e";!l()&&a()&&1>q(".ssf-feedback").length&&q(document.body).append('\x3cdiv class\x3d"a-changeover ssf-feedback" style\x3d"display:none"\x3e\n          \x3cdiv class\x3d"a-changeover-inner"\x3e\n            \x3ci class\x3d"a-icon a-icon-checkmark-inverse"\x3e\x3c/i\x3e\n            \x3cstrong class\x3d"a-size-medium"\x3e'+k.taf_copy_url_changeover+"\x3c/strong\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e");
var A=function(a){return{title:k["taf_"+a.name+"_tooltip"]||a.label,label:k["taf_"+a.name+"_name"]||a.label}};g.lineMarketplaces.includes(b.marketplaceId)||v.li?c.push("pi"):c.push("li");x||c.push("embed");g.cnMarketplace.includes(b.marketplaceId)&&c.push.apply(c,L(g.nonCNChannels));return{getModal:function(){var b="",e=!0,g=!1,l=h;try{for(var n=Object.entries(p)[Symbol.iterator](),q;!(e=(q=n.next()).done);e=!0){var x=ba(q.value,2),w=x[0],E=x[1];if(!c.includes(w)&&"copy"!==w){var m=A(E),z=v[E.name]||
E.getSharingUrl();b+='\x3cli class\x3d"ssf-channel-h"\x3e\n              \x3ca class\x3d"ssf-channel a-color-base" aria-label\x3d"'+m.label+'" href\x3d"'+z+'" title\x3d"'+m.title+'" data-key\x3d"'+w+'"\x3e\n                '+d("medium")+'\n                \x3ci role\x3d"img" aria-label\x3d"'+m.label+'" style\x3d"background-image: url('+E.image+')"\x3e\x3c/i\x3e\n              \x3c/a\x3e\n              \x3cspan\x3e'+m.label+"\x3c/span\x3e\n            \x3c/li\x3e"}}}catch(G){g=!0,l=G}finally{try{!e&&
n.return&&n.return()}finally{if(g)throw l;}}e=a()?'\x3cdiv class\x3d"ssf-copy-section a-box a-padding-base a-spacing-top-large"\x3e\n              \x3cdiv class\x3d"link-section"\x3e'+f.return+'\x3c/div\x3e\n              \x3cdiv class\x3d"copy-button"\x3e'+r+"\x3c/div\x3e\n          \x3c/div\x3e":"";return'\x3ch3 class\x3d"a-spacing-large"\x3e'+k.taf_share_bottom_sheet_title+"\x3c/h3\x3e"+('\x3cdiv class\x3d"ssf-h-icons"\x3e\x3cul class\x3d"ssf-h-icons a-nostyle"\x3e'+b+"\x3c/ul\x3e\x3c/div\x3e")+
e},getPopover:function(){var a="",b=!0,k=!1,e=h;try{for(var f=Object.entries(p)[Symbol.iterator](),r;!(b=(r=f.next()).done);b=!0){var g=ba(r.value,2),w=g[0],l=g[1];if(!c.includes(w)){var q=A(l),x=v[l.name]||l.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-v"\x3e\n              \x3ca class\x3d"ssf-channel '+w+' a-color-base" aria-label\x3d"'+q.label+'" href\x3d"'+x+'" title\x3d"'+q.title+'" data-key\x3d"'+w+'"\x3e\n                '+d("small")+'\n                \x3ci role\x3d"img" aria-label\x3d"'+
q.label+'" style\x3d"background-image: url('+l.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"'+w+'-label"\x3e'+q.label+"\x3c/span\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e"}}}catch(G){k=!0,e=G}finally{try{!b&&f.return&&f.return()}finally{if(k)throw e;}}return'\x3cul class\x3d"a-nostyle"\x3e'+a+"\x3c/ul\x3e"},getBottom:function(){var a="",b=!0,e=!1,f=h;try{for(var r=Object.entries(p)[Symbol.iterator](),g;!(b=(g=r.next()).done);b=!0){var l=ba(g.value,2),w=l[0],q=l[1];if(!c.includes(w)){var x=
A(q),m=v[q.name]||q.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-b a-padding-base"\x3e\n              \x3ca class\x3d"ssf-channel '+w+' a-color-base" aria-label\x3d"'+x.label+'" href\x3d"'+m+'" title\x3d"'+x.title+'" data-key\x3d"'+w+'"\x3e\n                '+d("medium")+'\n                \x3ci role\x3d"img" aria-label\x3d"'+x.label+'" style\x3d"background-image: url('+q.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"a-size-base-plus"\x3e'+x.label+"\x3c/span\x3e\n              \x3c/a\x3e\n              \x3c/li\x3e"}}}catch(G){e=
!0,f=G}finally{try{!b&&r.return&&r.return()}finally{if(e)throw f;}}return'\x3cdiv class\x3d"a-padding-base ssf-header"\x3e\n          \x3ch4\x3e'+k.taf_share_bottom_sheet_title+'\x3c/h4\x3e\n        \x3c/div\x3e\x3cdiv class\x3d"ssf-scroll"\x3e\x3cul class\x3d"a-nostyle"\x3e'+(a+"\x3c/ul\x3e")+"\x3c/ul\x3e\x3c/div\x3e"},getCustomize:function(){var a=void 0;u.now("SocialShareWidgetCustomizeTemplate").execute(function(b){a=e.customize?b.getCustomizeBox(k):""});var b='\x3ch3 class\x3d"a-spacing-base a-spacing-top-base"\x3e'+
k.taf_share_bottom_sheet_title+"\x3c/h3\x3e",c='\x3cdiv class\x3d"ssf-heading-container"\x3e\x3cimg class\x3d"ssf-back-btn" src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg"\x3e'+b+"\x3c/div\x3e",f='\x3cdiv class\x3d"a-padding-base a-box ssf-preview-container ssf-no-border" style\x3d"background-image: url('+e.image+')"\x3e'+d("medium")+"\x3c/div\x3e",h=e.caf?'\x3cdiv class\x3d"a-row a-spacing-top-large'+(e.customize?"":" a-spacing-large")+'"\x3e\n          \x3cdiv class\x3d"a-column a-span9"\x3e\n            \x3cstrong class\x3d"ssf-caf-toggle-label"\x3e'+
k.taf_custshare_caf_ingress+'\x3c/strong\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"a-column a-span3 a-text-right a-span-last"\x3e\n            \x3cdiv class\x3d"a-switch-row ssf-caf-toggle"\x3e\n          \x3cinput class\x3d"a-declarative a-switch-input" data-action\x3d"a-switch-input" name\x3d"caf" type\x3d"checkbox"\x3e\n          \x3clabel class\x3d"a-switch-label a-declarative" data-action\x3d"a-switch-label"\x3e\n            \x3cdiv class\x3d"a-switch a-declarative" data-action\x3d"a-switch"\x3e\n              \x3ca class\x3d"a-switch-control" aria-label\x3d"caf" style\x3d"transform: translateX(-1px) translateZ(0px);"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e':
"",r='\x3cspan class\x3d"a-button a-button-primary a-spacing-top-small ssf-customize-share-btn"\x3e\n          \x3cspan class\x3d"a-button-inner"\x3e\n            \x3cinput class\x3d"a-button-input" type\x3d"button" aria-labelledby\x3d"ssf-customize-share-btn"\x3e\n            \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"ssf-customize-share-btn"\x3e\n              '+e.shareLabel+"\n              "+d("small")+"\n            \x3c/span\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e";
return'\x3cdiv class\x3d"a-padding-base ssf-customize-container-one"\x3e'+b+f+h+a+r+"\x3c/div\x3e"+(e.customize?'\x3cdiv class\x3d"a-padding-base ssf-customize-container-two aok-hidden"\x3e'+c+f+h+'\x3cdiv class\x3d"a-row a-spacing-top-base a-padding-base ssf-tabs"\x3e\x3c/div\x3e'+r+"\x3c/div\x3e":"")}}}}});"use strict";u.when("jQuery","SocialShareWidget","SocialShareWidgetState","SocialShareWidgetLinkUtil").register("SocialShareWidgetTiny",function(e,m,z,q){m=m.SocialShareCore;var a=m.Metrics,l=
m.Constants;return{fetch:function(c){var d=c.data,f=c.isAsync;f=f===h?!0:f;var m=c.callback;try{if(z.get("dpx")){var b=z.get("shareData"),v=z.get("shareAapiCsrfToken"),p=z.get("aapiBaseUrl");b.isFlipStarsLeft&&(d.url=q.getLinkWithFlippedStarsLeft(d.url));"dprv"===b.refId&&(d.shareAapiCsrfToken=v,d.aapiBaseUrl=p,d.tinyUrlEnabled=!0,a.logCounter("reviews.tiny"))}var x=g.location.protocol+"//";if(d.isOGTEnabled){var k=new URL(d.url);k.searchParams.append("newOGT","1");d.url=k.toString()}var r=d.deeplinkInfo;
if(r&&r.isDisabled&&r.flag!=h){var A=new URL(d.url);A.searchParams.append("nodl",r.flag);d.url=A.toString()}if(d.tinyUrlEnabled)if(d.aapiBaseUrl&&d.shareAapiCsrfToken&&d.marketplaceId){var B=""+x+d.aapiBaseUrl+"/api/marketplaces/"+d.marketplaceId+"/social-share/tinyurl",t={longUrl:d.url};0<d.refMarkerId&&d.url.match(".+(?\x3d(\\/ref\x3d|ref_\x3d)([A-Za-z0-9_])+$).+")&&(t={longUrl:d.url+"_"+d.refMarkerId});var J={"Accept-Language":"en-US",Accept:'application/vnd.com.amazon.api+json; type\x3d"social-share.tinyurl/v1"',
"x-api-csrf-token":d.shareAapiCsrfToken,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":z.get("slateToken")};a.startTimer("Tiny");e.ajax(B,{type:"POST",headers:J,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",async:f,data:t,success:function(b){a.logCounter("Tiny.Response");a.logCounter("Desktop.Tiny.Response");a.logCounterRefactor("Tiny.Response");b.entity&&b.entity.shortUrl?(m(b.entity.shortUrl.url),a.logCounter("Tiny.Success")):(a.logCounter("Tiny.Error"),
m(d.url))},error:function(){a.logCounter("Tiny.Error");a.logCounter("Desktop.Tiny.Error");a.logCounterRefactor("Tiny.Error");m(d.url)},complete:function(){a.stopTimer("Tiny")}})}else return a.logCounter("Tiny.Unavailable"),m(d.url);else return m(d.url)}catch(C){return u.log("Error generating tinyURL: "+C.toString(),"ERROR",l.SSF_AUI_PACKAGE_ATTRIBUTION),d.url}}}});"use strict";u.when("A").register("SocialShareWidgetState",function(e){var h="social-"+g.ue_id+"-share",z={slateToken:e.$('meta[name\x3d"encrypted-slate-token"]').attr("content")||
"",dpx:!1};e.state(h,z);return{getCurrent:function(){return e.state(h)},get:function(e){return this.getCurrent()[e]},getAndReset:function(e){var a=this.get(e);a&&this.set(e,null);return a},set:function(g,a){var l=this.getCurrent();e.trigger("ssf:event:state:set",l);if(!g)return l;l[g]=a;l=e.state(h,l);e.trigger("ssf:event:state:changed",l);return l}}});"use strict";u.when("jQuery","SocialShareWidget","SocialShareWidgetState").register("SocialShareWidgetAPI",function(e,m,z){m=m.SocialShareCore;var q=
m.Constants,a=m.Metrics,l=g.location.protocol+"//",c=a.getMetricName(e,q.customize),d=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT"}),f=Object.freeze({generateImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.generate.customized.image.response/v1"',externalizeImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.externalize.customized.image.response/v1"',fetchTabs:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.shareable.attributes.response/v1"',
fetchCAFID:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.consult-a-friend.feedback-request.response/v1"'}),y=function(a){return(a=a.entity)&&"SUCCEEDED"===a.status?a.tabs.map(function(a){var b={id:a.id,heading:a.shortDisplayName,text:a.longDisplayName,isQuote:!0};a.params&&(b.values=Object.values(a.params)[0],b.isQuote=!1);return b}):[]};return{build:function(b){var g=b.shareAapiCsrfToken,p=b.locale,x=b.cafAapiCsrfToken,k=b.productType,r=b.shareDataAttributes,
A=r.marketplaceId,m=r.asin,t=r.ingress,J=l+b.aapiBaseUrl,C=z.get("slateToken");C||a.logCounter("slate.missing");var n=function(a){return J+"/custom/socialshareapicontracts/marketplaces/"+A+"/products/"+m+"/shareframework/"+a},D=function(a){var b=a.async;e.ajax({url:a.url,type:a.type,async:b===h?!0:b,data:a.data,headers:{"Accept-Language":p,Accept:a.accept,"x-api-csrf-token":a.cafToken||g,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":C},xhrFields:{withCredentials:!0},
success:a.success,error:a.error,complete:a.complete})};return{generateImage:function(b,e){var k=n("generatecustomizedimage");a.startTimer("GenerateCustomizeImage");D({url:k,type:d.POST,data:b,accept:f.generateImage,success:function(b){a.logCounter(c,"generateCustomizeImageSuccess");a.logCounterRefactor("generateCustomizeImageSuccess",t);e(b)},error:function(b){a.logCounter(c,"generateCustomizeImageFail");a.logCounterRefactor("generateCustomizeImageFail",t);a.logCounter("generateCustomizeImageFail");
u.log("Error generating customize image. with request URL "+k+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",q.SSF_AUI_PACKAGE_ATTRIBUTION);e(b)},complete:function(){a.stopTimer("GenerateCustomizeImage")}})},externalizeImage:function(b,e,k){var h=n("externalizecustomizedimage?customizedImageUrl\x3d"+b);a.startTimer("ExternalizeImage");D({url:h,type:d.PUT,accept:f.externalizeImage,async:k,success:function(a){e(a)},error:function(b){a.logCounter(c,"externalizeImageFail");a.logCounterRefactor("externalizeImageFail",
t);a.logCounter("externalizeImageFail");u.log("Error externalizing image. with request URL "+h+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",q.SSF_AUI_PACKAGE_ATTRIBUTION);e({})},complete:function(){a.stopTimer("ExternalizeImage")}})},fetchTabs:function(b){var e=n("productshareableattributes?locale\x3d"+p+"\x26type\x3d"+k);a.startTimer("FetchTabs");D({url:e,type:d.GET,accept:f.fetchTabs,success:function(d){a.logCounter(c,"FetchTabsSuccess");a.logCounterRefactor("FetchTabsSuccess",
t);b(y(d))},error:function(d){a.logCounter(c,"FetchTabsFail");a.logCounterRefactor("FetchTabsFail",t);a.logCounter("FetchTabsFail");u.log("Error Fetching customize share tabs. with request URL "+e+", Error Code: "+d.status+". Error Response: "+d.responseText,"ERROR",q.SSF_AUI_PACKAGE_ATTRIBUTION);b([])},complete:function(){a.stopTimer("FetchTabs")}})},fetchCAFID:function(e){var k=1<arguments.length&&arguments[1]!==h?arguments[1]:!0,r=J+"/custom/consultafriendcontracts/marketplaces/"+A+"/consultafriend/feedback-request/"+
m;a.logCounter(c,"CAF.createCAFID.called");a.logCounterRefactor("CAF.createCAFID.called",t);a.startTimer("CafIdGeneration");D({url:r,type:d.POST,accept:f.fetchCAFID,async:k,cafToken:x,success:function(a){e(a.entity&&a.entity.cafId,m,b.url)},error:function(b){a.logCounter(c,"CAF.createCAFID.failed");a.logCounterRefactor("CAF.createCAFID.failed",t);u.log("Error Creating CAF Id. with request URL "+r+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",q.SSF_AUI_PACKAGE_ATTRIBUTION);
e()},complete:function(){a.stopTimer("CafIdGeneration")}})}}}}});"use strict";u.when("A","SocialShareWidget").register("SocialShareWidgetCustomShareOptionsTemplate",function(e,g){var m=e.capabilities.rtl,q=g.SocialShareCore.Detection.isAndroid(),a=void 0,l=e.constants.HIDE_CLASS;u.when("mash").execute(function(b){return a=b});var c=function(b,c){if(!a)return c([]);var e=b.length,f=[];b.forEach(function(a){d(a,function(a,b){e--;b&&(f[a.label.toLowerCase()]=a);(3<=f.length||0>=e)&&c(f)})})},d=function(b,
c){var d="whatsapp"===b.label.toLowerCase()&&q;a.canLaunchIntentURL({url:b.schemeURI,successCallback:function(a){if(d)return c(b,!0);c(b,a)},failCallback:function(){if(d)return c(b,!0);c(b,!1)}})},f=function(a){var b=1<arguments.length&&arguments[1]!==h?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'" /\x3e'},y=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&
arguments[0]!==h?arguments[0]:"")+"\x3c/span\x3e"};return{getChannelsHtml:function(b,d){var f="";c(b.customShareOptions,function(c){c=e.extend(c,b.defaultCustomShareOptions);b.customShareBuiltChannels=c;for(var k in c)if(!("more"===k&&!a||"copy"===k&&q)){var r=f;var g=b;var p=c[k],t=p.stringId,v=p.className,m=p.label;p="https://m.media-amazon.com/images/G/01/share-icons/"+p.image;g='\x3cli class\x3d"ssf-custom-share-option '+(v===h?"":v)+'"  data-name\x3d"'+m.toLowerCase()+'"\x3e\n                    \x3cdiv class\x3d"ssf-custom-share-spinner"\x3e\n                        '+
('\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center '+l+'"\x3e\x3c/span\x3e')+'\n                        \x3cimg src\x3d"'+p+'" title\x3d"'+m+'" /\x3e\n                    \x3c/div\x3e\n                    \x3cspan class\x3d"label a-size-small"\x3e'+(g.t[t]||m)+"\x3c/span\x3e\n                 \x3c/li\x3e";f=r+g}d('\x3cdiv class\x3d"ssf-custom-channels-container a-color-base-background"\x3e\x3cdiv class\x3d"ssf-no-border"\x3e\x3cul class\x3d"ssf-custom-share-options-container a-unordered-list a-nostyle"\x3e'+
f+"\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e")})},getPreviewImage:function(a){var b=a.starRating,c=a.numberOfReviews,d=m?"r":"";a='\x3cdiv class\x3d"ssf-cso-p-image ssf-regular"\x3e'+f(a.productImage,"ssf-regular")+"\x3c/div\x3e";b=b?f("RIO"+b+d+".png","ssf-caf-stars"):"";c=y(c);return'\x3cdiv class\x3d"ssf-cso-p-image"\x3e'+a+('\x3cdiv class\x3d"ssf-cso-stickers ssf-regular"\x3e'+b+c+"\x3c/div\x3e")+"\x3c/div\x3e"},getErrorAlert:function(a){return'\x3cdiv class\x3d"ssf-error-text a-row '+l+'"\x3e\n          \x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error" role\x3d"alert"\x3e\n              \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                  \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                  \x3cdiv class\x3d"a-alert-content"\x3e\n                    \x3cspan class\x3d"ssf-error-generic '+
l+'"\x3e'+a.taf_custshare_channel_error_generic+'\x3c/span\x3e\n                    \x3cspan class\x3d"ssf-error-email '+l+'"\x3e'+a.taf_custshare_channel_error_email+"\x3c/span\x3e\n                  \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e"}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomShareOptions",function(e,m,z,q){var a=e.$;m=m.SocialShareCore;var l=m.ShareSheet,c=
m.Metrics,d=m.Constants,f=void 0,y=void 0,b=void 0,v=void 0,p=!1,x=e.constants.HIDE_CLASS;u.when("mash").execute(function(a){y=a});u.when("SocialShareWidgetTiny").execute(function(a){f=a});u.when("SocialShareWidgetCustomizeUtils").execute(function(a){b=a});u.when("SocialShareWidgetCAFUtils").execute(function(a){v=a});return{init:function(k,r,m,z,t,J){var A=k.customShareBuiltChannels;r=k.isCustomShareOptionsSheetEnabled;var n=r===h?!1:r;r=k.isFallbackShareUrlEnabled;var B=r===h?!1:r;r=k.caf;var K=
r===h?!1:r,w=k.shareDataAttributes;r=k.incrementShareCount;var E=r===h?null:r;r=k.treatment;var Y=r===h?"":r;r=k.weblab;var Z=r===h?"":r;r=k.refererURL;var G=r===h?"":r;e.on("ssf:event:caf-switch-change",function(a){p=a});var Q=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(x)},H=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(x)},M=function(){return p?(k.t["taf-share-caf-messageprefix"]||"")+" "+k.title:k.title},S=function(a,c,d){p?v.prepareShareUrl(k,
a,f,c,function(a,b){return d(a,b)}):b.prepareShareUrl(k,a,f,c,function(a){return d(a)})},I=function(a){a&&e.trigger("ssf:event:caf-share-complete-success",k)},F=function(a,b,c,f){try{var h=encodeURIComponent(f+" \n "+c);return"Messages"===b?e.capabilities.ios?"sms:///\x26body\x3d"+h:"mms:?\x26body\x3d"+h:"Email"===b?a=a.replace("\x26url\x3d{url}","").replace("{subject}",encodeURIComponent(k.emailSubject)).replace("{body}",""+h):"whatsApp"===b?a=a.replace("{url}",""+h):a=a.replace("{text}",encodeURIComponent(f)).replace("{url}",
encodeURIComponent(c)).replace("{titleAndURL}",encodeURIComponent(h))}catch(W){return u.log("Failed to generate shareUrl, error: "+W.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION),a}},N=function(a){p?c.logCounter("Caf.customShareOptions.ChannelClick."+a):b.imageState.isEmpty()?c.logCounter("CustomShareOptions.ChannelClick."+a):c.logCounter("Books.customShareOptions.ChannelClick."+a)},O=function(){return p?d.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC:b.imageState.isEmpty()?d.CUSTOM_SHEET_CLICK_LATENCY_METRIC:
d.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC},U=function(){var a=O();c.startTimer(a);S(d.EMPTY_STRING,!0,function(b){var d=1<arguments.length&&arguments[1]!==h?arguments[1]:"";k.tinyUrl=b;var f=k;d&&(f=e.extend({channelSelectCB:function(){I(d)},cafSwitchEnabled:p},k),f.title=M());(new l(f)).launch(function(){c.logCounter("customShareOptions.SheetOpen")});c.stopTimer(a)})},P=function(a,b){var c=q.getAndReset(d.customizeShareStateKey);return{channel:a,refMarker:b,refererURL:G,shareDataAttributes:w,treatment:Y,
weblab:Z,isCustomShareOptionsSheetEnabled:n,caf:K,cafSwitchEnabled:p,customizeShareCSAData:c}};a(".custom-share-native-sheet").unbind("click").click(function(a){try{N("more"),m(),U()}catch(aa){u.log('Failed to launch native share sheet via "More" button, error: '+aa.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".custom-share-copy").unbind("click").click(function(e){var f=this;try{(function(){var e=O();c.startTimer(e);N("copy");var g=d.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF,r=a(f);Q(r);S(g,
!1,function(f){var l=1<arguments.length&&arguments[1]!==h?arguments[1]:"";navigator.clipboard.writeText(f).then(function(){var f=k.shareUrl.refMarker.getClickForChannel(g);c.logCSAEvent(d.CSA_HIT_TYPE.SHARE,P("copy",f));c.logCounterRefactor("CopySuccess",w.ingress);p?c.logCounter("Caf.CustomShareOptions.CopySuccess"):b.imageState.isEmpty()?c.logCounter("customShareOptions.CopySuccess"):c.logCounter("Books.CustomShareOptions.CopySuccess");a(".ssf-feedback").show();H(r);m();c.stopTimer(e);l&&I(l);"function"===
typeof E&&E(f)},function(){c.stopTimer(e);p?c.logCounter("Caf.CustomShareOptions.CopyFail"):b.imageState.isEmpty()?c.logCounter("CustomShareOptions.CopyFail"):c.logCounter("Books.CustomShareOptions.CopyFail");J({shareData:k,channelRef:g,caf:K,cafSwitchEnabled:p});H(r)})})})()}catch(R){u.log("Failed to share using copy channel, error: "+R.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("click");a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").click(function(b){var e=
this;try{(function(){var b=O();c.startTimer(b);var f=a(e),r=f.data("name"),l=A[r],p=d.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_"+l.ref,n=k.shareUrl.refMarker.getClickForChannel(p);a(".ssf-error-text").addClass(x);Q(f);S(p,!0,function(a){var e=1<arguments.length&&arguments[1]!==h?arguments[1]:"",k=F(l.shareUrl,l.label,a,M());y?y.launchIntentURL({url:k,successCallback:function(){c.stopTimer(b);H(f);m();c.logCounterRefactor("ChannelClick",w.ingress);c.logCounter("ChannelClick");N(r);"function"===typeof E&&
E(n);e&&I(e);c.logCSAEvent(d.CSA_HIT_TYPE.SHARE,P(r,n))},failCallback:function(e){u.log("Failed to launch intent URL "+k+" with error code: "+e.code,"WARN",d.SSF_AUI_PACKAGE_ATTRIBUTION);c.logCounter("customShareOptions.LaunchShareIntentFail");H(f);c.stopTimer(b);B&&l.fallbackShareUrl?(c.logCSAEvent(d.CSA_HIT_TYPE.SHARE,P(r,n)),g.location=F(l.fallbackShareUrl,l.label,a,M())):(m(),U())}}):(H(f),c.logCSAEvent(d.CSA_HIT_TYPE.SHARE,P(r,n)),m(),g.open(k,"_blank"))})})()}catch(R){u.log("Failed to share, error: "+
R.toString(),"ERROR",d.SSF_AUI_PACKAGE_ATTRIBUTION)}})}}});"use strict";u.when("A","SocialShareWidgetState","atf").execute(function(e,h){var g=e.$("#ssf-primary-widget-desktop");e=e.$("#ssf-share-action");g=g.data("ssfShareIcon")||e.data("ssfShareIcon")||{};h.set("shareAapiCsrfToken",g.shareAapiCsrfToken);h.set("aapiBaseUrl",g.aapiBaseUrl);h.set("dpx",!0)});"use strict";u.when("A","SocialShareWidget").execute(function(e,h){var g=void 0,q=h.SocialShareCore.Metrics;h=e.debounce(function(){clearTimeout(g)},
200,!0);e.declarative("ssf-share-icon","touchstart",function(){g=setTimeout(function(){q.logCounter("longpress")},500)});e.declarative("ssf-share-icon","touchmove touchend",h)});"use strict";u.when("A","SocialShareWidget").register("SocialShareWidgetMetrics",function(e,g){var m=g.SocialShareCore.Metrics,q=function(a){a=a.pathname.split("/").filter(function(a){return e.contains(a,"ref\x3d")});return(a.length?a[0]:"").replace("ref\x3d","")},a=function(a){return(a=a.match(/cm_sw_r_(?:cso_)?(.*?)_/))?
a[1]:h};u.now("SocialShareWidgetLoadedBTF").execute(function(a){a?m.logCounter("btf:render"):m.logCounter("atf:render")});u.when("atf").execute(function(){try{var h=e.capabilities,c=h.tablet;h.isIE&&m.logCounter("render.ie");(c||600<screen.width&&h.isAmazonApp)&&m.logCounter("render.tablet");var d=new URL(location.href);if(d.href.includes("cm_sw_r_")){var f=d.searchParams.get("ref")||d.searchParams.get("ref_");f||(f=q(d));if(f.startsWith("cm_sw_r_")){var g=a(f);g&&m.logCounter("return.visit."+g);
m.logCounter("return.visit")}}}catch(b){m.logCounter("urlparam.issue")}});return{getRefEq:q,getChannelFromRef:a}});"use strict";"use strict";u.register("SocialShareWidgetLinkUtil",function(){return{getLinkWithFlippedStarsLeft:function(e){try{var h=new URL(e.href||e),g=h.searchParams;if(g.get("ref_")&&g.get("starsLeft")){var q=g.get("ref_"),a=g.get("starsLeft"),l=g.get("newPreview");g.delete("ref_");g.delete("starsLeft");g.delete("newPreview");h.searchParams.append("ref_",q);h.searchParams.append("starsLeft",
a);l&&h.searchParams.append("newPreview",l)}return h.toString()}catch(c){return e.toString()}}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetCustomizeUtils").register("SocialShareWidgetCustomize",function(e,m,z,q){m=m.SocialShareCore;var a=e.$,l=m.ShareSheet,c=m.Url,d=m.Metrics,f=m.Constants,y=d.getMetricName(a,f.customize),b=e.constants.HIDE_CLASS,v=function(){},p,x=0,k=void 0,r=void 0,A=void 0,B=!1;u.when("a-checkbox").execute(function(a){return r=a});u.when("a-button").execute(function(a){return k=
a});try{(function(){var t=q.imageState;e.declarative("cafCheckboxAction","change",function(){A()});e.on(q.getEventName("Hide"),function(a){a.sheet.getContentContainer().remove();t.clear()});e.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(a){K(a.sheet)});var m=function(b,c,k){var f=a(".ssf-preview-container"),h=a(".ssf-caf-preview"),g=(p=c)?"CAF.switchOn":"CAF.switchOff";d.logCounter(y,g);d.logCounterRefactor(g,k);e.trigger("ssf:event:caf-switch-change",c);t.isConsultAFriendPreview=c;
k=q.getImageData(b,t);B?q.getBackendPreviewImage(b,k,function(a){a?D(a):e.trigger("ssf:event:preview-generation-failed",b)}):c?(h.fadeIn(100),f.hide()):(f.fadeIn(100),h.hide())},C=function(a){var b=a.shareData,c=a.channelRef,d=b.shareUrl;a=b.isOGTEnabled;a=a===h?!1:a;var e=b.aapiBaseUrl;e=e===h?"":e;var k=b.shareAapiCsrfToken;k=k===h?"":k;var f=b.tinyUrlEnabled;f=f===h?!1:f;var g=b.deeplinkInfo;g=g===h?{}:g;var r=b.shareDataAttributes,p=b.storeId;p=p===h?"":p;c=c?d.getReturnForChannel(c):d.return;
d=r.marketplaceId;return{tinyUrlEnabled:f,aapiBaseUrl:e,shareAapiCsrfToken:k,marketplaceId:d===h?"":d,url:c,isOGTEnabled:a,originalUrl:b.url||c,refMarkerId:x++,deeplinkInfo:g,storeId:p}},n=function(r,p,n,m,t,v,q){var A=n.shareDataAttributes,w=n.url,x=A.asin,B=A.ingress;A=n.refId;a(".ssf-customize-share-btn").find(".a-spinner").addClass(b);k(".ssf-customize-share-btn").enable();p();var z=!1;p=new URL(v===h?w:v);m&&(A=f.CAF_REF_PREFIX+"_"+A,p.searchParams.append("cafId",m),p.searchParams.append("cafASIN",
t),t!==x&&d.logCounter(y,"CAF.ShareASINMismatch"),z=!0);p.searchParams.append("language",g.languageOfPreference||n.locale||"en_US");n.shareUrl=new c(p.toString(),A);var J=C({shareData:n});u.when("SocialShareWidgetTiny").execute(function(a){a.fetch({data:J,callback:function(a){n.tinyUrl=a;q&&q();a=e.extend({channelSelectCB:function(){m&&e.trigger("ssf:event:caf-share-complete-success",n)},cafSwitchEnabled:z},n);(new l(a)).launch(function(){e.delay(function(a){r(n)},100);m?(d.logCounter(y,"CAF.ShareSheetOpen"),
d.logCounterRefactor("CAF.ShareSheetOpen",B)):(d.logCounter(y,"ShareSheetOpen"),d.logCounterRefactor("ShareSheetOpen",B))})}})})},D=function(a){if(!(1<arguments.length&&arguments[1]!==h&&arguments[1])){var b=new Image;b.src=a;b.onload=function(){t.productImageProperties.width=this.width;t.productImageProperties.height=this.height}}},K=function(a){var b=a.$contentContainer,c=parseInt(a.$container.css("max-height"));b=parseInt(b.height());c<b?(a.$contentContainer.css("height",c),d.logCounter("SmallDevice")):
a.$contentContainer.css("height","auto")};v=function(c,g,l,v){var x=c.shareDataAttributes,w=c.treatment,C=w===h?"":w;w=c.weblab;var J=w===h?"":w;w=c.caf;w=w===h?!1:w;var E=c.isCafPreviewGenerationMigrationEnabled,I=x.ingress;t.currentPreview=q.getRegularImage();p=c.cafSwitch;w&&E&&(B=!0);var F=function(a){d.logCounter(y,a);d.logCounterRefactor(a,I);d.logCounter(a)},N=function(b,c){z.build(b).fetchTabs(function(d){u.now("SocialShareWidgetCustomizeTemplate").execute(function(e){a(".ssf-tabs").html(e.getTabs(b,
d));c(d)})})};A=function(){var a=r(".ssf-caf-toggle");m(c,a.isChecked(),I)};c.customize&&c.customizePreSelected?N(c,function(a){var b=[];a.forEach(function(a){a.isQuote&&a.values.length&&b.push(a.values[0]);"BackgroundImageTab"==a.id&&a.values.forEach(function(a){"417kcYISTOL.jpg"==a.physicalId&&b.push(a)})});t.defaultCustomizationOptions=b;P(c,b);a=q.getImageData(c,t);q.getBackendPreviewImage(c,a,function(a){t.currentImage=a;D(a);q.adjustPreviewHeight();K(v)})}):B?(w=q.getImageData(c,t),q.getBackendPreviewImage(c,
w,function(a){a?D(a):e.trigger("ssf:event:preview-generation-failed",c)})):m(c,p,I);a(".ssf-customize-share-btn").click(function(){k(".ssf-customize-share-btn").isEnabled()&&(a(".ssf-customize-share-btn").find(".a-spinner").removeClass(b),k(".ssf-customize-share-btn").disable(),p?(F("CAF.shareClick"),d.startTimer("CAF.fetchCAFAndTinyURL"),c.title=(c.t["taf-share-caf-messageprefix"]||"")+" "+c.title,z.build(c).fetchCAFID(function(a,b,e){n(g,l,c,a,b,e,function(){d.stopTimer("CAF.fetchCAFAndTinyURL")})})):
(F("shareClick"),d.logCSAEvent(f.CSA_HIT_TYPE.CUSTOMIZE_SHARE,{channel:f.EMPTY_STRING,refMarker:c.shareUrl.refMarker.click,shareDataAttributes:x,treatment:C,weblab:J}),n(g,l,c)))});a(".ssf-caf-toggle-ed-ingress").click(function(){});a(".ssf-customize-icon").click(function(){k(this).isEnabled()&&(F("CustomizeButtonClick"),k(this).disable(),t.currentPreview=q.getCustomizeImage(),N(c,function(b){b.forEach(function(b){var c="input[type\x3dradio][name\x3d"+b.id+"]";a(c).change(function(b){b=JSON.parse(b.target.value);
O(b);a(c).unbind("click");a(this).one("click",function(a){a=a.target;a.checked=!1;a=JSON.parse(a.value);L(a)})})});c.customizePreSelected&&(a("#BackgroundImageTab1").trigger("click"),a("#BookQuotesTab0").trigger("click"));b=q.getImageData(c,t);q.getBackendPreviewImage(c,b,function(a){t.currentImage=a;q.transitionToCustomizePage();q.adjustCustomizedPreviewHeight();K(v);D(a)})}))});var O=function(a){q.setImage();Array.isArray(a)?a.forEach(function(a){t.set(a)}):t.set(a);var b=q.getImageData(c,t);F(a.id+
"Select");q.getBackendPreviewImage(c,b,function(a){t.currentImage=a;D(a)})},L=function(a){q.setImage();F(a.id+"Unselect");t.unset(a);a=q.getImageData(c,t);q.getBackendPreviewImage(c,a,function(a){t.currentImage=a;D(a)})},P=function(a,b){0<b.length&&b.forEach(function(a){t.set(a)})};a(".ssf-back-btn").click(function(){t.currentPreview=q.getRegularImage();d.logCounter("BackButtonClick");q.resetPreviewState(t);q.transitionToDefaultPage();K(v)});u.when("a-checkbox").execute(function(b){a(".ssf-caf-toggle-label").click(function(){var a=
b(".ssf-caf-toggle");a.check(!a.isChecked())})});e.on("ssf:event:preview-generation-failed",function(c){B=!1;a(".ssf-backend-preview").addClass(b);a(".ssf-html-preview").removeClass(b);m(c,p,I)})}})()}catch(t){d.logCounter(y,"Error"),d.logLoad("Error"),d.logFatal("Error loading Customize widget, Share Framework AUI: "+t.toString())}finally{d.logCounter(y,"Render"),d.logLoad("Render")}return{init:v}});"use strict";u.when("A").register("SocialShareWidgetCustomizeTemplate",function(e){var g=e.capabilities.rtl,
u=function(a){var b=1<arguments.length&&arguments[1]!==h?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'"/\x3e'},q=function(a){var b=1<arguments.length&&arguments[1]!==h?arguments[1]:"ssf-product-title-text";e.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(){e.$(".ssf-title-label").text(a.title)});return'\x3cdiv class\x3d"a-color-secondary a-padding-small '+b+'"\x3e\n      \x3cspan class\x3d"ssf-title-label" id\x3d"ssf-title-label"\x3e\n        \x3c!-- TITLE  --\x3e\n      \x3c/span\x3e\n    \x3c/div\x3e'},
a=function(a){var b=1<arguments.length&&arguments[1]!==h?arguments[1]:"",c=2<arguments.length&&arguments[2]!==h?arguments[2]:"",d=3<arguments.length&&arguments[3]!==h?arguments[3]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return c||d?'\x3cimg class\x3d"'+b+'" '+(d?'aria-labelledby\x3d"'+d+'"':"")+" "+(c?'aria-label\x3d"'+c+'"':"")+' src\x3d"'+a+'"/\x3e':u(a,b)},l=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&
arguments[0]!==h?arguments[0]:"")+"\x3c/span\x3e"},c=function(a){return'\x3cul class\x3d"ssf-options-box-container a-unordered-list a-nostyle"\x3e'+a.values.map(function(b,c){var d=e.extend(b,{id:a.id}),k={id:a.id,position:c,val:d,background:b.url};a.isQuote&&(k=e.extend(k,{center:!0,width:150,content:d.displayText,background:h}));d=k.id;c=k.position;b=k.content;b=b===h?"":b;var f=k.width,g=f===h?100:f,p=k.background;f=k.center;f=f===h?!1:f;k=k.val;g='style\x3d"width: '+g+"px;background-image: url("+
(p===h?"":p)+");background-size: "+g+"px "+g+'px;"';p=JSON.stringify(k);c=d+c;k=k.label||"";var l='\x3cspan class\x3d"aok-offscreen"\x3e'+k+"\x3c/span\x3e";f&&(l='\x3cspan class\x3d"a-box-inner a-text-center ssf-q-text"\x3e'+b+"\x3c/span\x3e");return'\x3cli class\x3d"ssf-options-box" aria-label\x3d\''+k+"'\x3e\n              \x3cinput id\x3d\""+c+'" type\x3d"radio" name\x3d"'+d+"\" value\x3d'"+p+"' aria-label\x3d'"+k+"'\x3e\x3c/input\x3e\n              \x3clabel for\x3d\""+c+'" class\x3d"a-box a-text-normal" '+
g+"\x3e"+l+"\x3c/label\x3e\n            \x3c/li\x3e"}).join("")+"\x3c/ul\x3e"},d=function(a){var b=1<arguments.length&&arguments[1]!==h?arguments[1]:"",c=2<arguments.length&&arguments[2]!==h?arguments[2]:!1;return'\x3cli class\x3d"a-tab-heading ssf-customize-tab '+(c?"a-active":"")+'" data-a-tab-name\x3d"ssf-tab-'+a+'" role\x3d"presentation"\x3e\n              \x3ca aria-label\x3d"'+b+'" href\x3d"#" role\x3d"tab" aria-selected\x3d"'+(c?"true":"false")+'" '+(c?"":'tabindex\x3d"-1"')+"\x3e"+b+"\x3c/a\x3e\n            \x3c/li\x3e"},
f=function(a){return'\x3cdiv data-a-name\x3d"ssf-tab-'+a+'" class\x3d"ssf-tab-'+a+" a-box a-box-tab a-tab-content "+(3<arguments.length&&arguments[3]!==h&&arguments[3]?"":"a-hidden")+' a-padding-mini" role\x3d"tabpanel" tabindex\x3d"0"\x3e\n              '+(1<arguments.length&&arguments[1]!==h?arguments[1]:"")+"\n            \x3c/div\x3e"},y=function(){return(0<arguments.length&&arguments[0]!==h?arguments[0]:[]).map(function(a){a=a.replace(/"|”|“/g,"");return{displayText:"“"+a+"”",value:a}})};return{getTabs:function(a,
e){var b=a.popularHighlightStrings;if(!e.length)return"";var g="",k="",h=-1;e.forEach(function(a,e){a.isQuote&&(a.values=y(b));if(!a.values.length)return"";-1===h&&(h=e);e=e===h;g+=d(a.id,a.heading,e);k+=f(a.id,c(a),a.text,e)});return'\x3cdiv class\x3d"a-tab-container a-size-small"\x3e'+('\x3cul data-action\x3d"a-tabs" class\x3d"a-tabs a-declarative ssf-customize-tab a-spacing-small" role\x3d"tablist" data-a-tabs\x3d\'{"name": "customize-tabs"}\'\x3e\n        '+g+"\x3c/ul\x3e"+k)+"\x3c/div\x3e"},
getCustomizeBox:function(a){return'\x3cdiv class\x3d"a-box a-color-alternate-background a-spacing-top-large a-padding-base ssf-customize-box"\x3e\n      '+('\x3ch5 class\x3d"a-size-small a-spacing-micro"\x3e'+a.taf_custshare_customizelong+"\x3c/h5\x3e")+('\x3cp class\x3d"a-size-small a-color-secondary"\x3e'+a.taf_custshare_customizedesc+"\x3c/p\x3e")+('\x3cspan class\x3d"a-button a-button-small" id\x3d"ssf-customize-share"\x3e\n      \x3cspan class\x3d"a-button-inner"\x3e\n        \x3cbutton class\x3d"a-button-text" type\x3d"button"\x3e'+
a.taf_custshare_customizeshort+"\x3c/button\x3e\n      \x3c/span\x3e\n    \x3c/span\x3e")+"\n    \x3c/div\x3e"},getBackArrow:function(a){a=a["taf-share-general-gobacktopage"]||"";return'\x3cbutton type\x3d"button" class\x3d"ssf-back-btn a-padding-small" aria-label\x3d"'+a+'" tabindex\x3d"0"\x3e'+('\x3cimg src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg" alt\x3d"'+a+'"\x3e')+"\x3c/button\x3e"},tabsContainer:'\x3cdiv class\x3d"a-row a-spacing-top-micro ssf-tabs a-color-base-background a-padding-mini"\x3e\x3c/div\x3e',
getImageSection:function(b){var c=q(b);var d=b.isCafPreviewGenerationMigrationEnabled;var e=b.customize,k=b.customizePreSelected;d=b.caf&&d?!0:e&&k?!0:!1;e='\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n      '+(b.customize?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+u("customize")+"\x3c/span\x3e":"")+'\n      \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n    \x3c/div\x3e';d='\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n              \x3cdiv class\x3d"ssf-backend-preview '+
(d?"":"aok-hidden")+'"\x3e'+e+'\x3c/div\x3e\n              \x3cdiv class\x3d"ssf-html-preview '+(d?"aok-hidden":"")+'"\x3e';var f=b.customize;k=b.t;e='\x3cdiv class\x3d"ssf-product-preview"\x3e'+a({productImage:b.productImage}.productImage,"","","ssf-title-label")+"\x3c/div\x3e";var m=b.starRating,B=m===h?"ZERO":m;m=b.customize;m=m===h?!1:m;var t=b.numberOfReviews,y=b.cafStarAlignmentLeft;b=b.isUnrecognizedUsersRichPreviewEnabled;B=a("RIO"+B+(g?"r":"")+".png","ssf-caf-stars",B);t=l(t);b='\x3cdiv class\x3d"ssf-caf-rating"\x3e\n              \x3cdiv class\x3d"'+
(y||b||m?"ssf-caf-rating-left":"ssf-caf-rating-right")+'"\x3e\n                '+B+t+"\n              \x3c/div\x3e\n            \x3c/div\x3e";f=f?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+u("customize")+"\x3c/span\x3e":"";m='\x3cp class\x3d"a-size-base a-spacing-micro ssf-caf-text"\x3e'+k.taf_custshare_caf_recipientemoji+"\x3c/p\x3e";k=a("caf-emojis"+(g?"r":"")+".png","ssf-caf-emojis",k.taf_custshare_acc_caf_emoimg||"Consult a friend emoji images");return d+('\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n              '+
f+'\n              \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n              '+e+"\n              "+b+"\n            \x3c/div\x3e "+('\x3cdiv class\x3d"ssf-caf-preview"\x3e\n              \x3cdiv class\x3d"a-padding-base ssf-caf-image"\x3e\n                \x3cdiv class\x3d"a-row ssf-caf-image-stickers"\x3e'+e+('\x3cdiv class\x3d"a-column ssf-caf-stickers"\x3e'+m+k+"\x3c/div\x3e")+"\x3c/div\x3e\n                  "+b+"\n                \x3c/div\x3e\n            \x3c/div\x3e"))+
"\x3c/div\x3e\n              "+c+"\n            \x3c/div\x3e"},getCustomizePreviewImage:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border ssf-cus-img-container"\x3e\n      \x3cdiv class\x3d"ssf-cus-img"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\x3c/div\x3e\n      '+q(a,"ssf-product-title-text-small")+"\n    \x3c/div\x3e"},getToggleContainer:function(a){var b=2<arguments.length&&arguments[2]!==h?arguments[2]:"",c=(1<arguments.length&&
arguments[1]!==h?arguments[1]:"").match(/^T(\d+)$/),d=a.taf_custshare_caf_ingress_learn_more||"Learn more";return'\x3cdiv class\x3d"a-row a-spacing-top-medium-plus a-spacing-small"\x3e\n      \x3cdiv class\x3d"a-column"\x3e\x3cdiv class\x3d"a-checkbox a-declarative a-checkbox-fancy ssf-caf-toggle" data-action\x3d"cafCheckboxAction"\x3e\n      \x3clabel\x3e\n        \x3cinput class\x3d"a-declarative" name\x3d"caf" type\x3d"checkbox"\x3e\n        \x3ci class\x3d"a-icon a-icon-checkbox"\x3e\x3c/i\x3e\n      \x3c/label\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n      \x3cdiv class\x3d"a-column"\x3e\n        \x3csmall class\x3d"ssf-caf-toggle-label a-size-base"\x3e'+
a["taf_custshare_caf_ingress"+(c?"_alt"+c[1]:"")]+"\x3c/small\x3e\n        "+("info_icon"===b?'\x3cspan class\x3d"ssf-info-icon"\x3e\x3cstrong class\x3d"ssf-caf-toggle-ed-ingress"\x3e\x26#9432;\x3c/strong\x3e\x3c/span\x3e':"learn_more_link"===b?'\x3csmall\x3e\x3ca class\x3d"ssf-caf-toggle-ed-ingress a-size-base a-link-normal"\x3e'+d+"\x3c/a\x3e\x3c/small\x3e":"")+"\n      \x3c/div\x3e\n    \x3c/div\x3e"}}});"use strict";u.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomizeUtils",
function(e,m,u,q){function a(a){var b=a.values,c=b.BackgroundImageTab,d=b.DeviceCoverImageTab,e=b.BookQuotesTab;b=b.isConsultAFriendPreview;var k=a.productImageProperties;a=k.width;k=k.height;return{bgId:(c===h?{}:c).physicalId||"",deviceId:(d===h?{}:d).physicalId||"",quoteValue:(e===h?{}:e).value||"",isConsultAFriendPreview:b===h?!1:b,width:a===h?"":a,height:k===h?"":k}}function l(a,b){var c=a.shareUrl,d=a.socialLinks;d=d===h?{}:d;var e=a.isOGTEnabled;e=e===h?!1:e;b=b?c.getReturnForChannel(b):c.return;
c=a.aapiBaseUrl;var f=a.shareAapiCsrfToken,k=a.tinyUrlEnabled,g=a.deeplinkInfo;g=g===h?{}:g;var r=a.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:k===h?!1:k,aapiBaseUrl:c===h?"":c,shareAapiCsrfToken:f===h?"":f,marketplaceId:r===h?"":r,url:b,isOGTEnabled:e,originalUrl:d.shareframework||a.url||b,refMarkerId:x++,deeplinkInfo:g}}function c(a,b,c,d){if(c.isEmpty())return d({});c=encodeURIComponent(c.currentImage);u.build(a).externalizeImage(c,d,b)}function d(a,b,c){u.build(a).generateImage(b,
function(a){c(a.entity)})}m=m.SocialShareCore;var f=e.constants.HIDE_CLASS,y=e.$,b=m.Constants,v=m.Metrics,p=m.Url,x=0;return{getEventName:function(a){return"a:sheet:after"+a+":ssf-customize-bottom-sheet"},getCustomizeImage:function(){return y(".ssf-cus-img")},getCustomizeImageContainer:function(){return y(".ssf-cus-img-container")},getRegularImage:function(){return y(".ssf-backend-preview .ssf-preview-container")},getPreviewBox:function(){return y(".ssf-preview-box")},setImage:function(a){this.imageState.currentPreview.css("background-image",
'url("'+a+'")')},showSpinner:function(){this.imageState.currentPreview.find(".a-spinner").removeClass(f)},hideSpinner:function(){this.imageState.currentPreview.find(".a-spinner").addClass(f)},transitionToCustomizePage:function(){y(".ssf-customize-container-one").addClass(f);y(".ssf-customize-container-two").removeClass(f).addClass("ssf-customize-transition")},adjustCustomizedPreviewHeight:function(){this.getCustomizeImageContainer().css({width:.76*g.innerWidth});var a=parseInt(this.getCustomizeImage().css("border-left-width"))+
parseInt(this.getCustomizeImage().css("border-right-width")),b=this.getCustomizeImage().innerWidth();this.getCustomizeImage().css({height:(b+a)/1.91})},adjustPreviewHeight:function(){this.getPreviewBox().css({width:.93*g.innerWidth});var a=parseInt(this.getRegularImage().css("border-left-width"))+parseInt(this.getRegularImage().css("border-right-width")),b=this.getRegularImage().innerWidth();this.getRegularImage().css({height:(b+a)/1.91})},transitionToDefaultPage:function(){y(".ssf-customize-container-two").addClass(f);
y(".ssf-customize-container-one").removeClass(f).addClass("ssf-customize-transition-back")},getImageData:function(b,c){var d=a(c);return{productImageUrl:b.productImage,starRating:b.starRating||"",numberOfReviews:b.numberOfReviews||"",backgroundImagePhysicalId:d.bgId,deviceCoverImagePhysicalId:d.deviceId,bookQuote:d.quoteValue,productImageWidth:d.width,productImageHeight:d.height,consultAFriendPreviewEnabled:c.isConsultAFriendPreview}},resetPreviewState:function(a){a.clear();0<a.defaultCustomizationOptions.length&&
a.defaultCustomizationOptions.forEach(function(b){a.set(b)})},getBackendPreviewImage:function(a,b,c){var e=this;e.setImage("");e.showSpinner();d(a,b,function(a){a&&"SUCCEEDED"===a.status?(a=a.customizedImage.url,e.hideSpinner(),e.setImage(a),c(a)):c()})},setCustomizeCSAData:function(c,d){var e=b.customizeShareStateKey;d=a(d);var f=b.TRUE,g=b.FALSE;q.set(e,{backgroundImagePhysicalId:d.bgId,deviceCoverImagePhysicalId:d.deviceId,hasQuote:0<d.quoteValue.length?f:g,isCustomizedExperienceEnabled:c.customize?
f:g,isCustomized:d.bgId||d.deviceId||d.quoteValue?f:g,customizePreSelected:c.customizePreSelected?f:g,isQuotesAvailable:c.popularHighlightStrings?f:g})},prepareShareUrl:function(a,d,f,g,h){this.setCustomizeCSAData(a,this.imageState);c(a,g,this.imageState,function(c){c=c.entity;var k=new URL(a.url),n=d;c&&c.physicalId?(v.logCounterRefactor("externalizeImageSuccess"),k.searchParams.append("cspi",c.physicalId),n=d+"_"+b.BOOKS_REF_PREFIX):(a.cafStarAlignmentLeft||a.isUnrecognizedUsersRichPreviewEnabled||
a.customize)&&k.searchParams.append("starsLeft","1");e.capabilities.ios&&"cso_sms"===d&&k.searchParams.append("newPreview",a.isNewIMessagePreview?1:0);a.shareUrl=new p(k.toString(),a.refId);c=l(a,n);f.fetch({data:c,isAsync:g,callback:function(a){h(a)}})})},imageState:{clear:function(){this.values={}},isEmpty:function(){return y.isEmptyObject(this.values)},values:{},unset:function(a){delete this.values[a.id]},set:function(a){this.values[a.id]=a},defaultCustomizationOptions:[],currentImage:"",isConsultAFriendPreview:!1,
currentPreview:"",productImageProperties:{width:0,height:0}}}});"use strict";u.when("SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCAFUtils",function(e,m){function u(a,e){var d=a.shareUrl,b=a.socialLinks;b=b===h?{}:b;var f=a.isOGTEnabled;f=f===h?!1:f;e=e?d.getReturnForChannel(q.CAF_REF_PREFIX+"_"+e):d.return;e=new URL(e);a.cafStarAlignmentLeft||a.isUnrecognizedUsersRichPreviewEnabled?e.searchParams.append("starsLeft","1"):a.caf&&e.searchParams.append("cafHiResImg","1");e.searchParams.has("language")||
e.searchParams.append("language",g.languageOfPreference||a.locale||"en_US");e=e.toString();d=a.aapiBaseUrl;var l=a.shareAapiCsrfToken,m=a.tinyUrlEnabled,k=a.deeplinkInfo;k=k===h?{}:k;var r=a.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:m===h?!1:m,aapiBaseUrl:d===h?"":d,shareAapiCsrfToken:l===h?"":l,marketplaceId:r===h?"":r,url:e,isOGTEnabled:f,originalUrl:b.shareframework||a.url||e,refMarkerId:c++,deeplinkInfo:k}}var q=e.SocialShareCore.Constants,a=e.SocialShareCore.Url,l=e.SocialShareCore.Metrics,
c=0;return{prepareShareUrl:function(c,e,g,b,h){var d=c.refId;l.logCounterRefactor("CAF.shareChannelClick",c.ingress);l.startTimer("CAF.fetchCAFAndTinyURL");d=q.CAF_REF_PREFIX+"_"+d;m.build(c).fetchCAFID(function(f,k){var m=new URL(c.url);f&&m.searchParams.append("cafId",f);k&&m.searchParams.append("cafASIN",k);c.shareUrl=new a(m.toString(),d);k=u(c,e);g.fetch({data:k,isAsync:b,callback:function(a){l.stopTimer("CAF.fetchCAFAndTinyURL");h(a,f)}})},b)}}});"use strict"});